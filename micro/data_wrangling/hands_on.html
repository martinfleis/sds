<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.55">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data wrangling – Spatial Data Science in Python</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../data_wrangling/exercise.html" rel="next">
<link href="../data_wrangling/concepts.html" rel="prev">
<link href="../_assets/favicon_micro.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../_assets/styles.css">
<meta name="twitter:title" content="Data wrangling – Spatial Data Science in Python">
<meta name="twitter:description" content="">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <div id="quarto-announcement" data-announcement-id="c42a78631397fae7ef4af29e37bb354b" class="alert alert-primary hidden"><i class="bi bi-bell-fill quarto-announcement-icon"></i><div class="quarto-announcement-content">
<p><strong><a href="https://is.cuni.cz/studium/eng/prijimacky/index.php?do=detail_kurz_mc&amp;cid=10752">Registration</a></strong> for the August 2024 iteration of the course is now open.</p>
</div><i class="bi bi-x-lg quarto-announcement-action"></i></div>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../data_wrangling/concepts.html">Open Data Science</a></li><li class="breadcrumb-item"><a href="../data_wrangling/hands_on.html">Data wrangling</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../_assets/logo_micro.svg" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main tools-wide">
    <a href="https://twitter.com/martinfleis" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-twitter"></i></a>
    <a href="https://github.com/martinfleis/sds" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
    <div id="quarto-search" class="quarto-navigation-tool px-1" title="Search"></div>
</div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">Course information</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course_information/infrastructure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Infrastructure</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course_information/assignment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">Introduction</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../introduction/concepts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">What is Spatial Data Science?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../introduction/hands_on.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Jupyter and Python</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../introduction/exercise.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Understanding Notebooks</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Open Data Science</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../data_wrangling/concepts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Open tools and open mindset</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../data_wrangling/hands_on.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Data wrangling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../data_wrangling/exercise.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning pandas</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">Spatial data</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../geographic_data/concepts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Spatial data old and new</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../geographic_data/hands_on.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bring in geography</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../geographic_data/exercise.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning GeoPandas</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false">
 <span class="menu-text">Spatial weights</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../spatial_graphs/concepts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Space as math</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../spatial_graphs/hands_on.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Spatial weights in PySAL</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../spatial_graphs/exercise.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Graph here, graph there</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false">
 <span class="menu-text">Exploratory spatial data analysis</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../autocorrelation/concepts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Explore space!</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../autocorrelation/hands_on.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Spatial autocorrelation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../autocorrelation/exercise.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Does it correlate?</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="false">
 <span class="menu-text">Point patterns</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../point_patterns/concepts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">I need more points</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../point_patterns/hands_on.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Point pattern analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../point_patterns/exercise.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Is there a pattern?</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="false">
 <span class="menu-text">Clustering</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../clustering/concepts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Similar data belong together</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../clustering/hands_on.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Clustering and regionalisation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../clustering/exercise.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Find me a cluster</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="false">
 <span class="menu-text">Raster data</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../raster_data/concepts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data as a grid</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../raster_data/hands_on.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Population as a raster grid</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../raster_data/exercise.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning xarray</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="false">
 <span class="menu-text">Interpolation</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../interpolation/concepts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Use space in your favour</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../interpolation/hands_on.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Spatial interpolation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../interpolation/exercise.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">What is in between?</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="false">
 <span class="menu-text">Regression</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../regression/concepts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Relationship and prediction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../regression/hands_on.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regression and geography</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../regression/exercise.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Fit that model</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#munging-and-wrangling" id="toc-munging-and-wrangling" class="nav-link active" data-scroll-target="#munging-and-wrangling">Munging and wrangling</a></li>
  <li><a href="#dataset" id="toc-dataset" class="nav-link" data-scroll-target="#dataset">Dataset</a></li>
  <li><a href="#pandas-101" id="toc-pandas-101" class="nav-link" data-scroll-target="#pandas-101">Pandas 101</a>
  <ul class="collapse">
  <li><a href="#data-structures" id="toc-data-structures" class="nav-link" data-scroll-target="#data-structures">Data Structures</a></li>
  <li><a href="#inspect" id="toc-inspect" class="nav-link" data-scroll-target="#inspect">Inspect</a></li>
  <li><a href="#summarise" id="toc-summarise" class="nav-link" data-scroll-target="#summarise">Summarise</a></li>
  <li><a href="#create-new-columns" id="toc-create-new-columns" class="nav-link" data-scroll-target="#create-new-columns">Create new columns</a></li>
  <li><a href="#remove-columns" id="toc-remove-columns" class="nav-link" data-scroll-target="#remove-columns">Remove columns</a></li>
  <li><a href="#index-based-queries" id="toc-index-based-queries" class="nav-link" data-scroll-target="#index-based-queries">Index-based queries</a></li>
  <li><a href="#condition-based-queries" id="toc-condition-based-queries" class="nav-link" data-scroll-target="#condition-based-queries">Condition-based queries</a></li>
  <li><a href="#combining-queries" id="toc-combining-queries" class="nav-link" data-scroll-target="#combining-queries">Combining queries</a></li>
  <li><a href="#sorting" id="toc-sorting" class="nav-link" data-scroll-target="#sorting">Sorting</a></li>
  </ul></li>
  <li><a href="#visual-exploration" id="toc-visual-exploration" class="nav-link" data-scroll-target="#visual-exploration">Visual Exploration</a>
  <ul class="collapse">
  <li><a href="#histograms" id="toc-histograms" class="nav-link" data-scroll-target="#histograms">Histograms</a></li>
  <li><a href="#kernel-density-plots" id="toc-kernel-density-plots" class="nav-link" data-scroll-target="#kernel-density-plots">Kernel Density Plots</a></li>
  <li><a href="#line-and-bar-plots" id="toc-line-and-bar-plots" class="nav-link" data-scroll-target="#line-and-bar-plots">Line and bar plots</a></li>
  </ul></li>
  <li><a href="#tidy-data" id="toc-tidy-data" class="nav-link" data-scroll-target="#tidy-data">Tidy data</a></li>
  <li><a href="#grouping-transforming-aggregating" id="toc-grouping-transforming-aggregating" class="nav-link" data-scroll-target="#grouping-transforming-aggregating">Grouping, transforming, aggregating</a></li>
  
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/martinfleis/sds/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="hands_on.ipynb" download="hands_on.ipynb"><i class="bi bi-journal-code"></i>Jupyter</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../data_wrangling/concepts.html">Open Data Science</a></li><li class="breadcrumb-item"><a href="../data_wrangling/hands_on.html">Data wrangling</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Data wrangling</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>You know the basics. What are Jupyter notebooks, how do they work, and how do you run Python in them. It is time to start using them for data science (no, that simple math you did the last time doesn’t count as data science).</p>
<p>You are about to enter the PyData ecosystem. It means that you will start learning how to work with Python from the middle. This course does not explicitly cover the fundamentals of programming. It is expected that those parts you need you’ll be able to pick as you go through the specialised data science stack. If you’re stuck, confused or need further explanation, use Google (or your favourite search engine), ask AI to explain the code or ask in online chat or during the class. Not everything will be told during the course (by design), and the internet is a friend of every programmer, so let’s figure out how to use it efficiently from the beginning.</p>
<p>Let’s dig in!</p>
<section id="munging-and-wrangling" class="level2">
<h2 class="anchored" data-anchor-id="munging-and-wrangling">Munging and wrangling</h2>
<p>Real-world datasets are messy. There is no way around it: datasets have “holes” (missing data), the amount of formats in which data can be stored is endless, and the best structure to share data is not always the optimum to analyse them, hence the need to <a href="http://dictionary.reference.com/browse/munge">munge</a><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> them. As has been correctly pointed out in many outlets, much of the time spent in what is called Data Science is related not only to sophisticated modelling and insight but has to do with much more basic and less exotic tasks such as obtaining data, processing, and turning them into a shape that makes analysis possible, and exploring it to get to know their basic properties.</p>
<p>Surprisingly, very little has been published on patterns, techniques, and best practices for quick and efficient data cleaning, manipulation, and transformation because of how labour-intensive and relevant this aspect is. In this session, you will use a few real-world datasets and learn how to process them into Python so they can be transformed and manipulated, if necessary, and analysed. For this, you will introduce some of the bread and butter of data analysis and scientific computing in Python. These are fundamental tools that are constantly used in almost any task relating to data analysis.</p>
<p>This notebook covers the basics and the content that is expected to be learnt by every student. You use a prepared dataset that saves us much of the more intricate processing that goes beyond the introductory level the session is aimed at. If you are interested in how it was done, there is a <a href="https://github.com/martinfleis/sds/blob/main/data/chicago_influenza_1918/preprocessing.ipynb">notebook</a>.</p>
<p>This notebook discusses several patterns to clean and structure data properly, including tidying, subsetting, and aggregating. You finish with some basic visualisation. An additional extension presents more advanced tricks to manipulate tabular data.</p>
</section>
<section id="dataset" class="level2">
<h2 class="anchored" data-anchor-id="dataset">Dataset</h2>
<p>You will be exploring demographic characteristics of Chicago in 1918 linked to the influenza mortality during the pandemic that happened back then, coming from the research paper by <span class="citation" data-cites="grantz2016disparities">Grantz et al. (<a href="#ref-grantz2016disparities" role="doc-biblioref">2016</a>)</span>. The data are aggregated to census tracts and contain information on unemployment, home ownership, age structure and influenza mortality from a period of 8 weeks.</p>
<p>The main tool you use is the <code>pandas</code> package. As with the <code>math</code> you used <a href="../introduction/hands_on.html">before</a>, you must import it first.</p>
<div id="cbe591d8" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="annotated-cell-1"><pre class="sourceCode python code-annotation-code code-with-copy code-annotated"><code class="sourceCode python"><a class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-1-1" class="code-annotation-target"><a href="#annotated-cell-1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-1" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="1" data-code-annotation="1">Import the <code>pandas</code> package under the alias <code>pd</code>. Using the alias is not necessary, but it is a convention nearly everyone follows.</span>
</dd>
</dl>
</div>
</div>
<p>The data is stored in a CSV file. To make things easier, you can read data from a file posted online so, for now, you do not need to download any dataset:</p>
<div id="fac7dd80" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="annotated-cell-2"><pre class="sourceCode python code-annotation-code code-with-copy code-annotated"><code class="sourceCode python"><a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-2-1" class="code-annotation-target"><a href="#annotated-cell-2-1" aria-hidden="true" tabindex="-1"></a>chicago_1918 <span class="op">=</span> pd.read_csv(</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-2-2" class="code-annotation-target"><a href="#annotated-cell-2-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://martinfleischmann.net/sds/data_wrangling/data/chicago_influenza_1918.csv"</span>,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-2-3" class="code-annotation-target"><a href="#annotated-cell-2-3" aria-hidden="true" tabindex="-1"></a>    index_col<span class="op">=</span><span class="st">"geography_code"</span>,</span>
<span id="annotated-cell-2-4"><a href="#annotated-cell-2-4" aria-hidden="true" tabindex="-1"></a>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-2" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="1" data-code-annotation="1">Use the <code>read_csv</code> function from <code>pandas</code>. Remember that you have imported <code>pandas</code> as <code>pd</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="2" data-code-annotation="2">Specify the path to the file. It could be a web address like here or a local file path.</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="3" data-code-annotation="3">Use the column <code>geography_code</code> as an index of the table by passing its name to the <code>index_col</code> keyword argument. It is not strictly necessary but allows us to choose and index on reading instead of specifying it later. More on indices below.</span>
</dd>
</dl>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>You are using <code>read_csv</code> because the file you want to read is in CSV format. However, <code>pandas</code> allows for many more formats to be read and write. A full list of formats supported may be found in <a href="https://pandas.pydata.org/docs/user_guide/io.html">the documentation</a>.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Alternative
</div>
</div>
<div class="callout-body-container callout-body">
<p>Instead of reading the file directly off the web, it is possible to download it manually, store it on your computer, and read it locally. To do that, you can follow these steps:</p>
<ol type="1">
<li>Download the file by right-clicking on <a href="https://martinfleischmann.net/sds/data_wrangling/data/chicago_influenza_1918.csv">this link</a> and saving the file</li>
<li>Place the file in the same folder as the notebook where you intend to read it</li>
<li>Replace the code in the cell above with:</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>chicago_1918 <span class="op">=</span> pd.read_csv(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"chicago_influenza_1918.csv"</span>,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    index_col<span class="op">=</span><span class="st">"geography_code"</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="pandas-101" class="level2">
<h2 class="anchored" data-anchor-id="pandas-101">Pandas 101</h2>
<p>Now, you are ready to start playing and interrogating the dataset! What you have at your fingertips is a table summarising, for each of the census tracts in Chicago more than a century ago, how many people lived in each by age, accompanied by some other socioeconomic data and influenza mortality. These tables are called <code>DataFrame</code> objects, and they have a lot of functionality built-in to explore and manipulate the data they contain. Let’s explore a few of those cool tricks!</p>
<section id="data-structures" class="level3">
<h3 class="anchored" data-anchor-id="data-structures">Data Structures</h3>
<p>The first aspect worth spending a bit of time on is the structure of a <code>DataFrame</code>. You can print it by simply typing its name:</p>
<div id="40f4e9a9" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>chicago_1918</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">gross_acres</th>
<th data-quarto-table-cell-role="th">illit</th>
<th data-quarto-table-cell-role="th">unemployed_pct</th>
<th data-quarto-table-cell-role="th">ho_pct</th>
<th data-quarto-table-cell-role="th">agecat1</th>
<th data-quarto-table-cell-role="th">agecat2</th>
<th data-quarto-table-cell-role="th">agecat3</th>
<th data-quarto-table-cell-role="th">agecat4</th>
<th data-quarto-table-cell-role="th">agecat5</th>
<th data-quarto-table-cell-role="th">agecat6</th>
<th data-quarto-table-cell-role="th">agecat7</th>
<th data-quarto-table-cell-role="th">influenza</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100001</td>
<td>1388.2</td>
<td>116</td>
<td>0.376950</td>
<td>0.124823</td>
<td>46</td>
<td>274</td>
<td>257</td>
<td>311</td>
<td>222</td>
<td>1122</td>
<td>587</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100002</td>
<td>217.7</td>
<td>14</td>
<td>0.399571</td>
<td>0.071647</td>
<td>35</td>
<td>320</td>
<td>441</td>
<td>624</td>
<td>276</td>
<td>1061</td>
<td>508</td>
<td>6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100003</td>
<td>401.3</td>
<td>69</td>
<td>0.349558</td>
<td>0.092920</td>
<td>50</td>
<td>265</td>
<td>179</td>
<td>187</td>
<td>163</td>
<td>1020</td>
<td>392</td>
<td>8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100004</td>
<td>86.9</td>
<td>11</td>
<td>0.422535</td>
<td>0.030072</td>
<td>43</td>
<td>241</td>
<td>129</td>
<td>141</td>
<td>123</td>
<td>1407</td>
<td>539</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100005</td>
<td>337.1</td>
<td>20</td>
<td>0.431822</td>
<td>0.084703</td>
<td>65</td>
<td>464</td>
<td>369</td>
<td>464</td>
<td>328</td>
<td>2625</td>
<td>1213</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100492</td>
<td>2176.6</td>
<td>136</td>
<td>0.404430</td>
<td>0.173351</td>
<td>85</td>
<td>606</td>
<td>520</td>
<td>705</td>
<td>439</td>
<td>2141</td>
<td>1460</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100493</td>
<td>680.0</td>
<td>271</td>
<td>0.377207</td>
<td>0.130158</td>
<td>243</td>
<td>1349</td>
<td>957</td>
<td>1264</td>
<td>957</td>
<td>4653</td>
<td>2180</td>
<td>40</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100494</td>
<td>1392.8</td>
<td>1504</td>
<td>0.336032</td>
<td>0.072317</td>
<td>309</td>
<td>1779</td>
<td>1252</td>
<td>1598</td>
<td>1086</td>
<td>6235</td>
<td>2673</td>
<td>85</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100495</td>
<td>640.0</td>
<td>167</td>
<td>0.311917</td>
<td>0.085667</td>
<td>59</td>
<td>333</td>
<td>206</td>
<td>193</td>
<td>80</td>
<td>726</td>
<td>224</td>
<td>15</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100496</td>
<td>709.8</td>
<td>340</td>
<td>0.369765</td>
<td>0.113549</td>
<td>157</td>
<td>979</td>
<td>761</td>
<td>959</td>
<td>594</td>
<td>2862</td>
<td>1206</td>
<td>30</td>
</tr>
</tbody>
</table>

<p>496 rows × 12 columns</p>
</div>
</div>
</div>
<p>Note the printing is cut to keep a nice and compact view but enough to see its structure. Since they represent a table of data, <code>DataFrame</code> objects have two dimensions: rows and columns. Each of these is automatically assigned a name in what you will call its <em>index</em>. When printing, the index of each dimension is rendered in bold, as opposed to the standard rendering for the content. The example above shows how the column index is automatically picked up from the <code>.csv</code> file’s column names. For rows, we have specified when reading the file you wanted the column <code>geography_code</code>, so that is used. If you hadn’t set any, <code>pandas</code> would automatically generate a sequence starting in <code>0</code> and going all the way to the number of rows minus one. This is the standard structure of a <code>DataFrame</code> object, so you will come to it over and over. Importantly, even when you move to spatial data, your datasets will have a similar structure.</p>
<p>One final feature that is worth mentioning about these tables is that they can hold columns with different types of data. In this example, you have counts (or <code>int</code> for integer types) and ratios (or ‘float’ for floating point numbers - a number with decimals) for each column. But it is useful to keep in mind that you can combine this with columns that hold other types of data such as categories, text (<code>str</code>, for string), dates or, as you will see later in the course, geographic features.</p>
<p>To extract a single column from this <code>DataFrame</code>, specify its name in the square brackets (<code>[]</code>). Note that the name, in this case, is a <code>string</code>. A piece of text. As such, it needs to be within single (<code>'</code>) or double quotes (<code>"</code>). The resulting data structure is no longer a <code>DataFrame</code>, but you have a <code>Series</code> because you deal with a single column.</p>
<div id="98399ab4" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>chicago_1918[<span class="st">"influenza"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>geography_code
G17003100001     9
G17003100002     6
G17003100003     8
G17003100004     2
G17003100005     7
                ..
G17003100492    12
G17003100493    40
G17003100494    85
G17003100495    15
G17003100496    30
Name: influenza, Length: 496, dtype: int64</code></pre>
</div>
</div>
</section>
<section id="inspect" class="level3">
<h3 class="anchored" data-anchor-id="inspect">Inspect</h3>
<p>Inspecting what it looks like. You can check the table’s top (or bottom) X lines by passing X to the method <code>head</code> (<code>tail</code>). For example, for the top/bottom five lines:</p>
<div id="057026a5" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>chicago_1918.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">gross_acres</th>
<th data-quarto-table-cell-role="th">illit</th>
<th data-quarto-table-cell-role="th">unemployed_pct</th>
<th data-quarto-table-cell-role="th">ho_pct</th>
<th data-quarto-table-cell-role="th">agecat1</th>
<th data-quarto-table-cell-role="th">agecat2</th>
<th data-quarto-table-cell-role="th">agecat3</th>
<th data-quarto-table-cell-role="th">agecat4</th>
<th data-quarto-table-cell-role="th">agecat5</th>
<th data-quarto-table-cell-role="th">agecat6</th>
<th data-quarto-table-cell-role="th">agecat7</th>
<th data-quarto-table-cell-role="th">influenza</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100001</td>
<td>1388.2</td>
<td>116</td>
<td>0.376950</td>
<td>0.124823</td>
<td>46</td>
<td>274</td>
<td>257</td>
<td>311</td>
<td>222</td>
<td>1122</td>
<td>587</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100002</td>
<td>217.7</td>
<td>14</td>
<td>0.399571</td>
<td>0.071647</td>
<td>35</td>
<td>320</td>
<td>441</td>
<td>624</td>
<td>276</td>
<td>1061</td>
<td>508</td>
<td>6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100003</td>
<td>401.3</td>
<td>69</td>
<td>0.349558</td>
<td>0.092920</td>
<td>50</td>
<td>265</td>
<td>179</td>
<td>187</td>
<td>163</td>
<td>1020</td>
<td>392</td>
<td>8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100004</td>
<td>86.9</td>
<td>11</td>
<td>0.422535</td>
<td>0.030072</td>
<td>43</td>
<td>241</td>
<td>129</td>
<td>141</td>
<td>123</td>
<td>1407</td>
<td>539</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100005</td>
<td>337.1</td>
<td>20</td>
<td>0.431822</td>
<td>0.084703</td>
<td>65</td>
<td>464</td>
<td>369</td>
<td>464</td>
<td>328</td>
<td>2625</td>
<td>1213</td>
<td>7</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="14e52377" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>chicago_1918.tail()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">gross_acres</th>
<th data-quarto-table-cell-role="th">illit</th>
<th data-quarto-table-cell-role="th">unemployed_pct</th>
<th data-quarto-table-cell-role="th">ho_pct</th>
<th data-quarto-table-cell-role="th">agecat1</th>
<th data-quarto-table-cell-role="th">agecat2</th>
<th data-quarto-table-cell-role="th">agecat3</th>
<th data-quarto-table-cell-role="th">agecat4</th>
<th data-quarto-table-cell-role="th">agecat5</th>
<th data-quarto-table-cell-role="th">agecat6</th>
<th data-quarto-table-cell-role="th">agecat7</th>
<th data-quarto-table-cell-role="th">influenza</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100492</td>
<td>2176.6</td>
<td>136</td>
<td>0.404430</td>
<td>0.173351</td>
<td>85</td>
<td>606</td>
<td>520</td>
<td>705</td>
<td>439</td>
<td>2141</td>
<td>1460</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100493</td>
<td>680.0</td>
<td>271</td>
<td>0.377207</td>
<td>0.130158</td>
<td>243</td>
<td>1349</td>
<td>957</td>
<td>1264</td>
<td>957</td>
<td>4653</td>
<td>2180</td>
<td>40</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100494</td>
<td>1392.8</td>
<td>1504</td>
<td>0.336032</td>
<td>0.072317</td>
<td>309</td>
<td>1779</td>
<td>1252</td>
<td>1598</td>
<td>1086</td>
<td>6235</td>
<td>2673</td>
<td>85</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100495</td>
<td>640.0</td>
<td>167</td>
<td>0.311917</td>
<td>0.085667</td>
<td>59</td>
<td>333</td>
<td>206</td>
<td>193</td>
<td>80</td>
<td>726</td>
<td>224</td>
<td>15</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100496</td>
<td>709.8</td>
<td>340</td>
<td>0.369765</td>
<td>0.113549</td>
<td>157</td>
<td>979</td>
<td>761</td>
<td>959</td>
<td>594</td>
<td>2862</td>
<td>1206</td>
<td>30</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Or get an overview of the table:</p>
<div id="de32354f" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>chicago_1918.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 496 entries, G17003100001 to G17003100496
Data columns (total 12 columns):
 #   Column          Non-Null Count  Dtype  
---  ------          --------------  -----  
 0   gross_acres     496 non-null    float64
 1   illit           496 non-null    int64  
 2   unemployed_pct  496 non-null    float64
 3   ho_pct          496 non-null    float64
 4   agecat1         496 non-null    int64  
 5   agecat2         496 non-null    int64  
 6   agecat3         496 non-null    int64  
 7   agecat4         496 non-null    int64  
 8   agecat5         496 non-null    int64  
 9   agecat6         496 non-null    int64  
 10  agecat7         496 non-null    int64  
 11  influenza       496 non-null    int64  
dtypes: float64(3), int64(9)
memory usage: 66.5+ KB</code></pre>
</div>
</div>
</section>
<section id="summarise" class="level3">
<h3 class="anchored" data-anchor-id="summarise">Summarise</h3>
<p>Or of the <em>values</em> of the table:</p>
<div id="d052a23c" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>chicago_1918.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">gross_acres</th>
<th data-quarto-table-cell-role="th">illit</th>
<th data-quarto-table-cell-role="th">unemployed_pct</th>
<th data-quarto-table-cell-role="th">ho_pct</th>
<th data-quarto-table-cell-role="th">agecat1</th>
<th data-quarto-table-cell-role="th">agecat2</th>
<th data-quarto-table-cell-role="th">agecat3</th>
<th data-quarto-table-cell-role="th">agecat4</th>
<th data-quarto-table-cell-role="th">agecat5</th>
<th data-quarto-table-cell-role="th">agecat6</th>
<th data-quarto-table-cell-role="th">agecat7</th>
<th data-quarto-table-cell-role="th">influenza</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>496.000000</td>
<td>496.000000</td>
<td>496.000000</td>
<td>496.000000</td>
<td>496.000000</td>
<td>496.000000</td>
<td>496.000000</td>
<td>496.000000</td>
<td>496.000000</td>
<td>496.000000</td>
<td>496.000000</td>
<td>496.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>233.245968</td>
<td>199.116935</td>
<td>0.345818</td>
<td>0.061174</td>
<td>102.370968</td>
<td>555.167339</td>
<td>406.560484</td>
<td>524.100806</td>
<td>416.044355</td>
<td>2361.582661</td>
<td>1052.681452</td>
<td>16.070565</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>391.630857</td>
<td>297.836201</td>
<td>0.050498</td>
<td>0.038189</td>
<td>78.677423</td>
<td>423.526444</td>
<td>301.564896</td>
<td>369.875444</td>
<td>281.825682</td>
<td>1545.469426</td>
<td>722.955717</td>
<td>12.252440</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>6.900000</td>
<td>0.000000</td>
<td>0.057800</td>
<td>0.000000</td>
<td>0.000000</td>
<td>3.000000</td>
<td>1.000000</td>
<td>4.000000</td>
<td>0.000000</td>
<td>8.000000</td>
<td>6.000000</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25%</td>
<td>79.975000</td>
<td>30.750000</td>
<td>0.323973</td>
<td>0.032106</td>
<td>46.750000</td>
<td>256.500000</td>
<td>193.500000</td>
<td>253.750000</td>
<td>220.500000</td>
<td>1169.750000</td>
<td>519.750000</td>
<td>8.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50%</td>
<td>99.500000</td>
<td>84.000000</td>
<td>0.353344</td>
<td>0.054389</td>
<td>82.000000</td>
<td>442.500000</td>
<td>331.500000</td>
<td>453.500000</td>
<td>377.000000</td>
<td>2102.000000</td>
<td>918.500000</td>
<td>13.500000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75%</td>
<td>180.125000</td>
<td>241.250000</td>
<td>0.373382</td>
<td>0.084762</td>
<td>136.000000</td>
<td>717.500000</td>
<td>532.500000</td>
<td>709.500000</td>
<td>551.750000</td>
<td>3191.750000</td>
<td>1379.250000</td>
<td>21.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>3840.000000</td>
<td>2596.000000</td>
<td>0.495413</td>
<td>0.197391</td>
<td>427.000000</td>
<td>2512.000000</td>
<td>1917.000000</td>
<td>2665.000000</td>
<td>2454.000000</td>
<td>9792.000000</td>
<td>4163.000000</td>
<td>85.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Note how the output is also a <code>DataFrame</code> object, so you can do with it the same things you would with the original table (e.g.&nbsp;writing it to a file).</p>
<p>In this case, the summary might be better presented if the table is “transposed”:</p>
<div id="1ab2158c" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>chicago_1918.describe().T</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">std</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">25%</th>
<th data-quarto-table-cell-role="th">50%</th>
<th data-quarto-table-cell-role="th">75%</th>
<th data-quarto-table-cell-role="th">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">gross_acres</td>
<td>496.0</td>
<td>233.245968</td>
<td>391.630857</td>
<td>6.9000</td>
<td>79.975000</td>
<td>99.500000</td>
<td>180.125000</td>
<td>3840.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">illit</td>
<td>496.0</td>
<td>199.116935</td>
<td>297.836201</td>
<td>0.0000</td>
<td>30.750000</td>
<td>84.000000</td>
<td>241.250000</td>
<td>2596.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">unemployed_pct</td>
<td>496.0</td>
<td>0.345818</td>
<td>0.050498</td>
<td>0.0578</td>
<td>0.323973</td>
<td>0.353344</td>
<td>0.373382</td>
<td>0.495413</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">ho_pct</td>
<td>496.0</td>
<td>0.061174</td>
<td>0.038189</td>
<td>0.0000</td>
<td>0.032106</td>
<td>0.054389</td>
<td>0.084762</td>
<td>0.197391</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">agecat1</td>
<td>496.0</td>
<td>102.370968</td>
<td>78.677423</td>
<td>0.0000</td>
<td>46.750000</td>
<td>82.000000</td>
<td>136.000000</td>
<td>427.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">agecat2</td>
<td>496.0</td>
<td>555.167339</td>
<td>423.526444</td>
<td>3.0000</td>
<td>256.500000</td>
<td>442.500000</td>
<td>717.500000</td>
<td>2512.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">agecat3</td>
<td>496.0</td>
<td>406.560484</td>
<td>301.564896</td>
<td>1.0000</td>
<td>193.500000</td>
<td>331.500000</td>
<td>532.500000</td>
<td>1917.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">agecat4</td>
<td>496.0</td>
<td>524.100806</td>
<td>369.875444</td>
<td>4.0000</td>
<td>253.750000</td>
<td>453.500000</td>
<td>709.500000</td>
<td>2665.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">agecat5</td>
<td>496.0</td>
<td>416.044355</td>
<td>281.825682</td>
<td>0.0000</td>
<td>220.500000</td>
<td>377.000000</td>
<td>551.750000</td>
<td>2454.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">agecat6</td>
<td>496.0</td>
<td>2361.582661</td>
<td>1545.469426</td>
<td>8.0000</td>
<td>1169.750000</td>
<td>2102.000000</td>
<td>3191.750000</td>
<td>9792.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">agecat7</td>
<td>496.0</td>
<td>1052.681452</td>
<td>722.955717</td>
<td>6.0000</td>
<td>519.750000</td>
<td>918.500000</td>
<td>1379.250000</td>
<td>4163.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">influenza</td>
<td>496.0</td>
<td>16.070565</td>
<td>12.252440</td>
<td>0.0000</td>
<td>8.000000</td>
<td>13.500000</td>
<td>21.000000</td>
<td>85.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Equally, common descriptive statistics are also available. To obtain minimum values for each column, you can use <code>.min()</code>.</p>
<div id="487b7c4b" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>chicago_1918.<span class="bu">min</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>gross_acres       6.9000
illit             0.0000
unemployed_pct    0.0578
ho_pct            0.0000
agecat1           0.0000
agecat2           3.0000
agecat3           1.0000
agecat4           4.0000
agecat5           0.0000
agecat6           8.0000
agecat7           6.0000
influenza         0.0000
dtype: float64</code></pre>
</div>
</div>
<p>Or to obtain a minimum for a single column only.</p>
<div id="2c87c012" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>chicago_1918[<span class="st">"influenza"</span>].<span class="bu">min</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>0</code></pre>
</div>
</div>
<p>Note here how you have restricted the calculation of the minimum value to one column only by getting the <code>Series</code> and calling <code>.min()</code> on that.</p>
<p>Similarly, you can restrict the calculations to a single row using <code>.loc[]</code> indexer:</p>
<div id="cf79b01e" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>chicago_1918.loc[<span class="st">"G17003100492"</span>].<span class="bu">max</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>2176.6</code></pre>
</div>
</div>
</section>
<section id="create-new-columns" class="level3">
<h3 class="anchored" data-anchor-id="create-new-columns">Create new columns</h3>
<p>You can generate new variables by applying operations to existing ones. For example, you can calculate the total population by area. Here are a couple of ways to do it:</p>
<div id="2e202427" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="annotated-cell-13"><pre class="sourceCode python code-annotation-code code-with-copy code-annotated"><code class="sourceCode python"><span id="annotated-cell-13-1"><a href="#annotated-cell-13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This one is longer, hardcoded</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-13" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-13-2" class="code-annotation-target"><a href="#annotated-cell-13-2" aria-hidden="true" tabindex="-1"></a>total_population <span class="op">=</span> (</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-13" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-13-3" class="code-annotation-target"><a href="#annotated-cell-13-3" aria-hidden="true" tabindex="-1"></a>    chicago_1918[<span class="st">"agecat1"</span>]</span>
<span id="annotated-cell-13-4"><a href="#annotated-cell-13-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> chicago_1918[<span class="st">"agecat2"</span>]</span>
<span id="annotated-cell-13-5"><a href="#annotated-cell-13-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> chicago_1918[<span class="st">"agecat3"</span>]</span>
<span id="annotated-cell-13-6"><a href="#annotated-cell-13-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> chicago_1918[<span class="st">"agecat4"</span>]</span>
<span id="annotated-cell-13-7"><a href="#annotated-cell-13-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> chicago_1918[<span class="st">"agecat5"</span>]</span>
<span id="annotated-cell-13-8"><a href="#annotated-cell-13-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> chicago_1918[<span class="st">"agecat6"</span>]</span>
<span id="annotated-cell-13-9"><a href="#annotated-cell-13-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> chicago_1918[<span class="st">"agecat7"</span>]</span>
<span id="annotated-cell-13-10"><a href="#annotated-cell-13-10" aria-hidden="true" tabindex="-1"></a>)</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-13" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-13-11" class="code-annotation-target"><a href="#annotated-cell-13-11" aria-hidden="true" tabindex="-1"></a>total_population.head()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-13" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-13" data-code-lines="2" data-code-annotation="1">Create a new variable called <code>total_population</code> to store the result.</span>
</dd>
<dt data-target-cell="annotated-cell-13" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-13" data-code-lines="3,4,5,6,7,8,9" data-code-annotation="2">Select all the columns and add them together</span>
</dd>
<dt data-target-cell="annotated-cell-13" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-13" data-code-lines="11" data-code-annotation="3">Print the top of the variable</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>geography_code
G17003100001    2819
G17003100002    3265
G17003100003    2256
G17003100004    2623
G17003100005    5528
dtype: int64</code></pre>
</div>
</div>
<div id="e83511d0" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="annotated-cell-14"><pre class="sourceCode python code-annotation-code code-with-copy code-annotated"><code class="sourceCode python"><span id="annotated-cell-14-1"><a href="#annotated-cell-14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This one is shorted, using a range of columns and sum</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-14" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-14-2" class="code-annotation-target"><a href="#annotated-cell-14-2" aria-hidden="true" tabindex="-1"></a>total_population <span class="op">=</span> chicago_1918.loc[:, <span class="st">"agecat1"</span>:<span class="st">"agecat7"</span>].<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="annotated-cell-14-3"><a href="#annotated-cell-14-3" aria-hidden="true" tabindex="-1"></a>total_population.head()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-14" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-14" data-code-lines="2" data-code-annotation="1">This line is simple, but a lot happens here. Using <code>.loc[]</code>, you select all the rows (<code>:</code> part) and all the columns between <code>"agecat1"</code> and <code>"agecat7"</code>. Then you apply <code>.sum()</code> over <code>axis=1</code>, which means along rows, to get a sum per each row.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>geography_code
G17003100001    2819
G17003100002    3265
G17003100003    2256
G17003100004    2623
G17003100005    5528
dtype: int64</code></pre>
</div>
</div>
<p>Once you have created the variable, you can make it part of the table:</p>
<div id="1782f8ea" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="annotated-cell-15"><pre class="sourceCode python code-annotation-code code-with-copy code-annotated"><code class="sourceCode python"><a class="code-annotation-anchor" data-target-cell="annotated-cell-15" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-15-1" class="code-annotation-target"><a href="#annotated-cell-15-1" aria-hidden="true" tabindex="-1"></a>chicago_1918[<span class="st">"total_population"</span>] <span class="op">=</span> total_population</span>
<span id="annotated-cell-15-2"><a href="#annotated-cell-15-2" aria-hidden="true" tabindex="-1"></a>chicago_1918.head()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-15" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-15" data-code-lines="1" data-code-annotation="1">Assing a variable <code>total_population</code> that contains a <code>Series</code> as a column <code>"total_population"</code>. <code>pandas</code> creates that column automatically. If it existed, it would get overridden.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display" data-execution_count="15">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">gross_acres</th>
<th data-quarto-table-cell-role="th">illit</th>
<th data-quarto-table-cell-role="th">unemployed_pct</th>
<th data-quarto-table-cell-role="th">ho_pct</th>
<th data-quarto-table-cell-role="th">agecat1</th>
<th data-quarto-table-cell-role="th">agecat2</th>
<th data-quarto-table-cell-role="th">agecat3</th>
<th data-quarto-table-cell-role="th">agecat4</th>
<th data-quarto-table-cell-role="th">agecat5</th>
<th data-quarto-table-cell-role="th">agecat6</th>
<th data-quarto-table-cell-role="th">agecat7</th>
<th data-quarto-table-cell-role="th">influenza</th>
<th data-quarto-table-cell-role="th">total_population</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100001</td>
<td>1388.2</td>
<td>116</td>
<td>0.376950</td>
<td>0.124823</td>
<td>46</td>
<td>274</td>
<td>257</td>
<td>311</td>
<td>222</td>
<td>1122</td>
<td>587</td>
<td>9</td>
<td>2819</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100002</td>
<td>217.7</td>
<td>14</td>
<td>0.399571</td>
<td>0.071647</td>
<td>35</td>
<td>320</td>
<td>441</td>
<td>624</td>
<td>276</td>
<td>1061</td>
<td>508</td>
<td>6</td>
<td>3265</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100003</td>
<td>401.3</td>
<td>69</td>
<td>0.349558</td>
<td>0.092920</td>
<td>50</td>
<td>265</td>
<td>179</td>
<td>187</td>
<td>163</td>
<td>1020</td>
<td>392</td>
<td>8</td>
<td>2256</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100004</td>
<td>86.9</td>
<td>11</td>
<td>0.422535</td>
<td>0.030072</td>
<td>43</td>
<td>241</td>
<td>129</td>
<td>141</td>
<td>123</td>
<td>1407</td>
<td>539</td>
<td>2</td>
<td>2623</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100005</td>
<td>337.1</td>
<td>20</td>
<td>0.431822</td>
<td>0.084703</td>
<td>65</td>
<td>464</td>
<td>369</td>
<td>464</td>
<td>328</td>
<td>2625</td>
<td>1213</td>
<td>7</td>
<td>5528</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>You can also do other mathematical operations on columns. These are always automatically applied to individual values in corresponding rows.</p>
<div id="60383b68" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="annotated-cell-16"><pre class="sourceCode python code-annotation-code code-with-copy code-annotated"><code class="sourceCode python"><a class="code-annotation-anchor" data-target-cell="annotated-cell-16" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-16-1" class="code-annotation-target"><a href="#annotated-cell-16-1" aria-hidden="true" tabindex="-1"></a>homeowners <span class="op">=</span> chicago_1918[<span class="st">"total_population"</span>] <span class="op">*</span> chicago_1918[<span class="st">"ho_pct"</span>]</span>
<span id="annotated-cell-16-2"><a href="#annotated-cell-16-2" aria-hidden="true" tabindex="-1"></a>homeowners.head()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-16" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-16" data-code-lines="1" data-code-annotation="1">A product of the total population and home ownership percentage provides an estimation of the number of homeowners per census tract.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>geography_code
G17003100001    351.875177
G17003100002    233.928353
G17003100003    209.628319
G17003100004     78.879711
G17003100005    468.237675
dtype: float64</code></pre>
</div>
</div>
<div id="27b96d8c" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="annotated-cell-17"><pre class="sourceCode python code-annotation-code code-with-copy code-annotated"><code class="sourceCode python"><a class="code-annotation-anchor" data-target-cell="annotated-cell-17" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-17-1" class="code-annotation-target"><a href="#annotated-cell-17-1" aria-hidden="true" tabindex="-1"></a>pop_density <span class="op">=</span> chicago_1918[<span class="st">"total_population"</span>] <span class="op">/</span> chicago_1918[<span class="st">"gross_acres"</span>]</span>
<span id="annotated-cell-17-2"><a href="#annotated-cell-17-2" aria-hidden="true" tabindex="-1"></a>pop_density.head()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-17" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-17" data-code-lines="1" data-code-annotation="1">A division of the total population by the area results in an estimation of the population density.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>geography_code
G17003100001     2.030687
G17003100002    14.997703
G17003100003     5.621729
G17003100004    30.184120
G17003100005    16.398695
dtype: float64</code></pre>
</div>
</div>
<p>A different spin on this is assigning new values: you can generate new variables with scalars<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>, and modify those:</p>
<div id="82ec603f" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="annotated-cell-18"><pre class="sourceCode python code-annotation-code code-with-copy code-annotated"><code class="sourceCode python"><a class="code-annotation-anchor" data-target-cell="annotated-cell-18" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-18-1" class="code-annotation-target"><a href="#annotated-cell-18-1" aria-hidden="true" tabindex="-1"></a>chicago_1918[<span class="st">"ones"</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="annotated-cell-18-2"><a href="#annotated-cell-18-2" aria-hidden="true" tabindex="-1"></a>chicago_1918.head()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-18" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-18" data-code-lines="1" data-code-annotation="1">Create a new column named <code>"ones"</code> with all ones.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display" data-execution_count="18">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">gross_acres</th>
<th data-quarto-table-cell-role="th">illit</th>
<th data-quarto-table-cell-role="th">unemployed_pct</th>
<th data-quarto-table-cell-role="th">ho_pct</th>
<th data-quarto-table-cell-role="th">agecat1</th>
<th data-quarto-table-cell-role="th">agecat2</th>
<th data-quarto-table-cell-role="th">agecat3</th>
<th data-quarto-table-cell-role="th">agecat4</th>
<th data-quarto-table-cell-role="th">agecat5</th>
<th data-quarto-table-cell-role="th">agecat6</th>
<th data-quarto-table-cell-role="th">agecat7</th>
<th data-quarto-table-cell-role="th">influenza</th>
<th data-quarto-table-cell-role="th">total_population</th>
<th data-quarto-table-cell-role="th">ones</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100001</td>
<td>1388.2</td>
<td>116</td>
<td>0.376950</td>
<td>0.124823</td>
<td>46</td>
<td>274</td>
<td>257</td>
<td>311</td>
<td>222</td>
<td>1122</td>
<td>587</td>
<td>9</td>
<td>2819</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100002</td>
<td>217.7</td>
<td>14</td>
<td>0.399571</td>
<td>0.071647</td>
<td>35</td>
<td>320</td>
<td>441</td>
<td>624</td>
<td>276</td>
<td>1061</td>
<td>508</td>
<td>6</td>
<td>3265</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100003</td>
<td>401.3</td>
<td>69</td>
<td>0.349558</td>
<td>0.092920</td>
<td>50</td>
<td>265</td>
<td>179</td>
<td>187</td>
<td>163</td>
<td>1020</td>
<td>392</td>
<td>8</td>
<td>2256</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100004</td>
<td>86.9</td>
<td>11</td>
<td>0.422535</td>
<td>0.030072</td>
<td>43</td>
<td>241</td>
<td>129</td>
<td>141</td>
<td>123</td>
<td>1407</td>
<td>539</td>
<td>2</td>
<td>2623</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100005</td>
<td>337.1</td>
<td>20</td>
<td>0.431822</td>
<td>0.084703</td>
<td>65</td>
<td>464</td>
<td>369</td>
<td>464</td>
<td>328</td>
<td>2625</td>
<td>1213</td>
<td>7</td>
<td>5528</td>
<td>1</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>And you can modify specific values too:</p>
<div id="f8d2159d" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>chicago_1918.loc[<span class="st">"G17003100001"</span>, <span class="st">"ones"</span>] <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>chicago_1918.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">gross_acres</th>
<th data-quarto-table-cell-role="th">illit</th>
<th data-quarto-table-cell-role="th">unemployed_pct</th>
<th data-quarto-table-cell-role="th">ho_pct</th>
<th data-quarto-table-cell-role="th">agecat1</th>
<th data-quarto-table-cell-role="th">agecat2</th>
<th data-quarto-table-cell-role="th">agecat3</th>
<th data-quarto-table-cell-role="th">agecat4</th>
<th data-quarto-table-cell-role="th">agecat5</th>
<th data-quarto-table-cell-role="th">agecat6</th>
<th data-quarto-table-cell-role="th">agecat7</th>
<th data-quarto-table-cell-role="th">influenza</th>
<th data-quarto-table-cell-role="th">total_population</th>
<th data-quarto-table-cell-role="th">ones</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100001</td>
<td>1388.2</td>
<td>116</td>
<td>0.376950</td>
<td>0.124823</td>
<td>46</td>
<td>274</td>
<td>257</td>
<td>311</td>
<td>222</td>
<td>1122</td>
<td>587</td>
<td>9</td>
<td>2819</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100002</td>
<td>217.7</td>
<td>14</td>
<td>0.399571</td>
<td>0.071647</td>
<td>35</td>
<td>320</td>
<td>441</td>
<td>624</td>
<td>276</td>
<td>1061</td>
<td>508</td>
<td>6</td>
<td>3265</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100003</td>
<td>401.3</td>
<td>69</td>
<td>0.349558</td>
<td>0.092920</td>
<td>50</td>
<td>265</td>
<td>179</td>
<td>187</td>
<td>163</td>
<td>1020</td>
<td>392</td>
<td>8</td>
<td>2256</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100004</td>
<td>86.9</td>
<td>11</td>
<td>0.422535</td>
<td>0.030072</td>
<td>43</td>
<td>241</td>
<td>129</td>
<td>141</td>
<td>123</td>
<td>1407</td>
<td>539</td>
<td>2</td>
<td>2623</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100005</td>
<td>337.1</td>
<td>20</td>
<td>0.431822</td>
<td>0.084703</td>
<td>65</td>
<td>464</td>
<td>369</td>
<td>464</td>
<td>328</td>
<td>2625</td>
<td>1213</td>
<td>7</td>
<td>5528</td>
<td>1</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="remove-columns" class="level3">
<h3 class="anchored" data-anchor-id="remove-columns">Remove columns</h3>
<p>Permanently deleting variables is also within reach of one command:</p>
<div id="4346a175" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>chicago_1918 <span class="op">=</span> chicago_1918.drop(columns<span class="op">=</span><span class="st">"ones"</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>chicago_1918.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">gross_acres</th>
<th data-quarto-table-cell-role="th">illit</th>
<th data-quarto-table-cell-role="th">unemployed_pct</th>
<th data-quarto-table-cell-role="th">ho_pct</th>
<th data-quarto-table-cell-role="th">agecat1</th>
<th data-quarto-table-cell-role="th">agecat2</th>
<th data-quarto-table-cell-role="th">agecat3</th>
<th data-quarto-table-cell-role="th">agecat4</th>
<th data-quarto-table-cell-role="th">agecat5</th>
<th data-quarto-table-cell-role="th">agecat6</th>
<th data-quarto-table-cell-role="th">agecat7</th>
<th data-quarto-table-cell-role="th">influenza</th>
<th data-quarto-table-cell-role="th">total_population</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100001</td>
<td>1388.2</td>
<td>116</td>
<td>0.376950</td>
<td>0.124823</td>
<td>46</td>
<td>274</td>
<td>257</td>
<td>311</td>
<td>222</td>
<td>1122</td>
<td>587</td>
<td>9</td>
<td>2819</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100002</td>
<td>217.7</td>
<td>14</td>
<td>0.399571</td>
<td>0.071647</td>
<td>35</td>
<td>320</td>
<td>441</td>
<td>624</td>
<td>276</td>
<td>1061</td>
<td>508</td>
<td>6</td>
<td>3265</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100003</td>
<td>401.3</td>
<td>69</td>
<td>0.349558</td>
<td>0.092920</td>
<td>50</td>
<td>265</td>
<td>179</td>
<td>187</td>
<td>163</td>
<td>1020</td>
<td>392</td>
<td>8</td>
<td>2256</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100004</td>
<td>86.9</td>
<td>11</td>
<td>0.422535</td>
<td>0.030072</td>
<td>43</td>
<td>241</td>
<td>129</td>
<td>141</td>
<td>123</td>
<td>1407</td>
<td>539</td>
<td>2</td>
<td>2623</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100005</td>
<td>337.1</td>
<td>20</td>
<td>0.431822</td>
<td>0.084703</td>
<td>65</td>
<td>464</td>
<td>369</td>
<td>464</td>
<td>328</td>
<td>2625</td>
<td>1213</td>
<td>7</td>
<td>5528</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="index-based-queries" class="level3">
<h3 class="anchored" data-anchor-id="index-based-queries">Index-based queries</h3>
<p>Here, you explore how to subset parts of a <code>DataFrame</code> if you know exactly which bits you want. For example, if you want to extract the influenza mortality and total population of the first four areas in the table, you use <code>loc</code> with lists:</p>
<div id="9af3df5a" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="annotated-cell-21"><pre class="sourceCode python code-annotation-code code-with-copy code-annotated"><code class="sourceCode python"><a class="code-annotation-anchor" data-target-cell="annotated-cell-21" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-21-1" class="code-annotation-target"><a href="#annotated-cell-21-1" aria-hidden="true" tabindex="-1"></a>death_pop_first4 <span class="op">=</span> chicago_1918.loc[</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-21" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-21-2" class="code-annotation-target"><a href="#annotated-cell-21-2" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"G17003100001"</span>, <span class="st">"G17003100002"</span>, <span class="st">"G17003100003"</span>, <span class="st">"G17003100004"</span>],</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-21" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-21-3" class="code-annotation-target"><a href="#annotated-cell-21-3" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"influenza"</span>, <span class="st">"total_population"</span>],</span>
<span id="annotated-cell-21-4"><a href="#annotated-cell-21-4" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="annotated-cell-21-5"><a href="#annotated-cell-21-5" aria-hidden="true" tabindex="-1"></a>death_pop_first4</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-21" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-21" data-code-lines="1" data-code-annotation="1"><code>loc</code> takes two inputs. Selection of rows and selection of columns. If the latter is not present, it is assumed that all the columns are selected. The same could be achieved by using <code>:</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-21" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-21" data-code-lines="2" data-code-annotation="2">A <code>list</code> of index values. Note that you use squared brackets (<code>[]</code>) to delineate the index of the items you want to subset. In Python, this sequence of items is called a list.</span>
</dd>
<dt data-target-cell="annotated-cell-21" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-21" data-code-lines="3" data-code-annotation="3">A <code>list</code> of columns.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display" data-execution_count="21">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">influenza</th>
<th data-quarto-table-cell-role="th">total_population</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100001</td>
<td>9</td>
<td>2819</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100002</td>
<td>6</td>
<td>3265</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100003</td>
<td>8</td>
<td>2256</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100004</td>
<td>2</td>
<td>2623</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>You can see how you can create a list with the names (index IDs) along each of the two dimensions of a <code>DataFrame</code> (rows and columns), and <code>loc</code> will return a subset of the original table only with the elements queried for.</p>
<p>An alternative to list-based queries is what is called “range-based” queries. These work on the indices of the table, but instead of requiring the ID of each item you want to retrieve, they operate by requiring only two IDs: the first and last element in a range of items. Range queries are expressed with a colon (<code>:</code>). For example:</p>
<div id="07d97469" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>range_query <span class="op">=</span> chicago_1918.loc[</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"G17003100010"</span>:<span class="st">"G17003100012"</span>,</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"influenza"</span>:<span class="st">'total_population'</span>,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>range_query</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">influenza</th>
<th data-quarto-table-cell-role="th">total_population</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100010</td>
<td>18</td>
<td>11380</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100011</td>
<td>16</td>
<td>8382</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100012</td>
<td>8</td>
<td>5874</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The range query picks up all the elements between the specified IDs. Note that for this to work, the first ID in the range needs to be placed before the second one in the table’s index.</p>
<p>Once you know about list and range-based queries, you can combine them! For example, you can specify a range of rows and a list of columns:</p>
<div id="024d0e1c" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>range_list_qry <span class="op">=</span> chicago_1918.loc[</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"G17003100010"</span>:<span class="st">"G17003100012"</span>, [<span class="st">"influenza"</span>, <span class="st">"total_population"</span>]</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>range_list_qry</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">influenza</th>
<th data-quarto-table-cell-role="th">total_population</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100010</td>
<td>18</td>
<td>11380</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100011</td>
<td>16</td>
<td>8382</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100012</td>
<td>8</td>
<td>5874</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="condition-based-queries" class="level3">
<h3 class="anchored" data-anchor-id="condition-based-queries">Condition-based queries</h3>
<p>However, sometimes, you do not know exactly which observations you want, but you do know what conditions they need to satisfy (e.g.&nbsp;areas with more than 2,000 inhabitants). For these cases, <code>DataFrames</code> support selection based on conditions. Let us see a few examples. Suppose you want to select…</p>
<p><em>… areas with more than 60 cases of influenza deaths:</em></p>
<div id="30b350f8" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>flu_over_60 <span class="op">=</span> chicago_1918.loc[chicago_1918[<span class="st">"influenza"</span>] <span class="op">&gt;</span> <span class="dv">60</span>]</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>flu_over_60</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">gross_acres</th>
<th data-quarto-table-cell-role="th">illit</th>
<th data-quarto-table-cell-role="th">unemployed_pct</th>
<th data-quarto-table-cell-role="th">ho_pct</th>
<th data-quarto-table-cell-role="th">agecat1</th>
<th data-quarto-table-cell-role="th">agecat2</th>
<th data-quarto-table-cell-role="th">agecat3</th>
<th data-quarto-table-cell-role="th">agecat4</th>
<th data-quarto-table-cell-role="th">agecat5</th>
<th data-quarto-table-cell-role="th">agecat6</th>
<th data-quarto-table-cell-role="th">agecat7</th>
<th data-quarto-table-cell-role="th">influenza</th>
<th data-quarto-table-cell-role="th">total_population</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100196</td>
<td>80.5</td>
<td>951</td>
<td>0.301564</td>
<td>0.016648</td>
<td>228</td>
<td>1504</td>
<td>925</td>
<td>998</td>
<td>608</td>
<td>3583</td>
<td>1092</td>
<td>62</td>
<td>8938</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100246</td>
<td>113.0</td>
<td>2596</td>
<td>0.330517</td>
<td>0.027537</td>
<td>407</td>
<td>2090</td>
<td>1497</td>
<td>1681</td>
<td>1063</td>
<td>4564</td>
<td>1934</td>
<td>77</td>
<td>13236</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100247</td>
<td>91.1</td>
<td>1534</td>
<td>0.293748</td>
<td>0.020664</td>
<td>215</td>
<td>1136</td>
<td>770</td>
<td>775</td>
<td>530</td>
<td>2993</td>
<td>1152</td>
<td>61</td>
<td>7571</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100285</td>
<td>120.0</td>
<td>621</td>
<td>0.318677</td>
<td>0.047779</td>
<td>419</td>
<td>1870</td>
<td>1190</td>
<td>1263</td>
<td>818</td>
<td>4370</td>
<td>1335</td>
<td>82</td>
<td>11265</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100352</td>
<td>600.0</td>
<td>638</td>
<td>0.267962</td>
<td>0.055023</td>
<td>404</td>
<td>1962</td>
<td>1251</td>
<td>1151</td>
<td>603</td>
<td>5261</td>
<td>1251</td>
<td>70</td>
<td>11883</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100494</td>
<td>1392.8</td>
<td>1504</td>
<td>0.336032</td>
<td>0.072317</td>
<td>309</td>
<td>1779</td>
<td>1252</td>
<td>1598</td>
<td>1086</td>
<td>6235</td>
<td>2673</td>
<td>85</td>
<td>14932</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p><em>… areas with less than 200 inhabitants:</em></p>
<div id="cb300b8f" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>pop_under <span class="op">=</span> chicago_1918.loc[chicago_1918[<span class="st">"total_population"</span>] <span class="op">&lt;</span> <span class="dv">200</span>]</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>pop_under</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">gross_acres</th>
<th data-quarto-table-cell-role="th">illit</th>
<th data-quarto-table-cell-role="th">unemployed_pct</th>
<th data-quarto-table-cell-role="th">ho_pct</th>
<th data-quarto-table-cell-role="th">agecat1</th>
<th data-quarto-table-cell-role="th">agecat2</th>
<th data-quarto-table-cell-role="th">agecat3</th>
<th data-quarto-table-cell-role="th">agecat4</th>
<th data-quarto-table-cell-role="th">agecat5</th>
<th data-quarto-table-cell-role="th">agecat6</th>
<th data-quarto-table-cell-role="th">agecat7</th>
<th data-quarto-table-cell-role="th">influenza</th>
<th data-quarto-table-cell-role="th">total_population</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100093</td>
<td>71.2</td>
<td>34</td>
<td>0.268041</td>
<td>0.025773</td>
<td>4</td>
<td>33</td>
<td>20</td>
<td>25</td>
<td>10</td>
<td>66</td>
<td>36</td>
<td>0</td>
<td>194</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100293</td>
<td>40.0</td>
<td>17</td>
<td>0.345238</td>
<td>0.053571</td>
<td>4</td>
<td>23</td>
<td>18</td>
<td>26</td>
<td>16</td>
<td>59</td>
<td>22</td>
<td>0</td>
<td>168</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100297</td>
<td>38.1</td>
<td>4</td>
<td>0.461538</td>
<td>0.000000</td>
<td>0</td>
<td>3</td>
<td>1</td>
<td>4</td>
<td>0</td>
<td>8</td>
<td>10</td>
<td>0</td>
<td>26</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100353</td>
<td>320.0</td>
<td>28</td>
<td>0.193750</td>
<td>0.018750</td>
<td>1</td>
<td>7</td>
<td>4</td>
<td>10</td>
<td>12</td>
<td>80</td>
<td>46</td>
<td>2</td>
<td>160</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100488</td>
<td>1600.1</td>
<td>3</td>
<td>0.404762</td>
<td>0.000000</td>
<td>2</td>
<td>5</td>
<td>4</td>
<td>7</td>
<td>1</td>
<td>17</td>
<td>6</td>
<td>0</td>
<td>42</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p><em>… areas with exactly a hundred illiterate persons:</em></p>
<div id="54b64f30" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>illit_100 <span class="op">=</span> chicago_1918.loc[chicago_1918[<span class="st">"illit"</span>] <span class="op">==</span> <span class="dv">100</span>]</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>illit_100</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">gross_acres</th>
<th data-quarto-table-cell-role="th">illit</th>
<th data-quarto-table-cell-role="th">unemployed_pct</th>
<th data-quarto-table-cell-role="th">ho_pct</th>
<th data-quarto-table-cell-role="th">agecat1</th>
<th data-quarto-table-cell-role="th">agecat2</th>
<th data-quarto-table-cell-role="th">agecat3</th>
<th data-quarto-table-cell-role="th">agecat4</th>
<th data-quarto-table-cell-role="th">agecat5</th>
<th data-quarto-table-cell-role="th">agecat6</th>
<th data-quarto-table-cell-role="th">agecat7</th>
<th data-quarto-table-cell-role="th">influenza</th>
<th data-quarto-table-cell-role="th">total_population</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100076</td>
<td>79.4</td>
<td>100</td>
<td>0.326936</td>
<td>0.043691</td>
<td>140</td>
<td>791</td>
<td>562</td>
<td>666</td>
<td>520</td>
<td>3163</td>
<td>1496</td>
<td>20</td>
<td>7338</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100483</td>
<td>670.0</td>
<td>100</td>
<td>0.379153</td>
<td>0.142368</td>
<td>188</td>
<td>1170</td>
<td>829</td>
<td>1132</td>
<td>763</td>
<td>3191</td>
<td>1482</td>
<td>21</td>
<td>8755</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Unlimited power
</div>
</div>
<div class="callout-body-container callout-body">
<p>These queries can grow in sophistication with almost no limits. For example, here is a case where you want to find out the areas where the oldest age group is more than half the population:</p>
<div id="fcfe8878" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>chicago_1918.loc[</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    (chicago_1918[<span class="st">"agecat7"</span>] <span class="op">*</span> <span class="dv">100</span> <span class="op">/</span> chicago_1918[<span class="st">"total_population"</span>]) <span class="op">&gt;</span> <span class="dv">50</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">gross_acres</th>
<th data-quarto-table-cell-role="th">illit</th>
<th data-quarto-table-cell-role="th">unemployed_pct</th>
<th data-quarto-table-cell-role="th">ho_pct</th>
<th data-quarto-table-cell-role="th">agecat1</th>
<th data-quarto-table-cell-role="th">agecat2</th>
<th data-quarto-table-cell-role="th">agecat3</th>
<th data-quarto-table-cell-role="th">agecat4</th>
<th data-quarto-table-cell-role="th">agecat5</th>
<th data-quarto-table-cell-role="th">agecat6</th>
<th data-quarto-table-cell-role="th">agecat7</th>
<th data-quarto-table-cell-role="th">influenza</th>
<th data-quarto-table-cell-role="th">total_population</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100227</td>
<td>146.3</td>
<td>22</td>
<td>0.0657</td>
<td>0.000853</td>
<td>2</td>
<td>16</td>
<td>9</td>
<td>22</td>
<td>27</td>
<td>480</td>
<td>614</td>
<td>3</td>
<td>1170</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</div>
<p>All the condition-based queries above are expressed using the <code>loc</code> operator. This is a powerful way, and since it shares syntax with index-based queries, it is also easier to remember. However, sometimes querying using <code>loc</code> involves a lot of quotation marks, parenthesis, etc. A more streamlined approach for condition-based queries of rows is provided by the <code>query</code> engine. Using this approach, you express everything in our query on a single string, or piece of text, and that is evaluated in the table at once. For example, you can run the same operation as in the first query above with the following syntax:</p>
<div id="3f59a37f" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>flu_over_60_query <span class="op">=</span> chicago_1918.query(<span class="st">"influenza &gt; 60"</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>flu_over_60_query</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">gross_acres</th>
<th data-quarto-table-cell-role="th">illit</th>
<th data-quarto-table-cell-role="th">unemployed_pct</th>
<th data-quarto-table-cell-role="th">ho_pct</th>
<th data-quarto-table-cell-role="th">agecat1</th>
<th data-quarto-table-cell-role="th">agecat2</th>
<th data-quarto-table-cell-role="th">agecat3</th>
<th data-quarto-table-cell-role="th">agecat4</th>
<th data-quarto-table-cell-role="th">agecat5</th>
<th data-quarto-table-cell-role="th">agecat6</th>
<th data-quarto-table-cell-role="th">agecat7</th>
<th data-quarto-table-cell-role="th">influenza</th>
<th data-quarto-table-cell-role="th">total_population</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100196</td>
<td>80.5</td>
<td>951</td>
<td>0.301564</td>
<td>0.016648</td>
<td>228</td>
<td>1504</td>
<td>925</td>
<td>998</td>
<td>608</td>
<td>3583</td>
<td>1092</td>
<td>62</td>
<td>8938</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100246</td>
<td>113.0</td>
<td>2596</td>
<td>0.330517</td>
<td>0.027537</td>
<td>407</td>
<td>2090</td>
<td>1497</td>
<td>1681</td>
<td>1063</td>
<td>4564</td>
<td>1934</td>
<td>77</td>
<td>13236</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100247</td>
<td>91.1</td>
<td>1534</td>
<td>0.293748</td>
<td>0.020664</td>
<td>215</td>
<td>1136</td>
<td>770</td>
<td>775</td>
<td>530</td>
<td>2993</td>
<td>1152</td>
<td>61</td>
<td>7571</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100285</td>
<td>120.0</td>
<td>621</td>
<td>0.318677</td>
<td>0.047779</td>
<td>419</td>
<td>1870</td>
<td>1190</td>
<td>1263</td>
<td>818</td>
<td>4370</td>
<td>1335</td>
<td>82</td>
<td>11265</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100352</td>
<td>600.0</td>
<td>638</td>
<td>0.267962</td>
<td>0.055023</td>
<td>404</td>
<td>1962</td>
<td>1251</td>
<td>1151</td>
<td>603</td>
<td>5261</td>
<td>1251</td>
<td>70</td>
<td>11883</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100494</td>
<td>1392.8</td>
<td>1504</td>
<td>0.336032</td>
<td>0.072317</td>
<td>309</td>
<td>1779</td>
<td>1252</td>
<td>1598</td>
<td>1086</td>
<td>6235</td>
<td>2673</td>
<td>85</td>
<td>14932</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>If you want to combine operations, this is also possible:</p>
<div id="35db0b03" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>flu_query <span class="op">=</span> chicago_1918.query(<span class="st">"(influenza &gt; 60) &amp; (total_population &lt; 10000)"</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>flu_query</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">gross_acres</th>
<th data-quarto-table-cell-role="th">illit</th>
<th data-quarto-table-cell-role="th">unemployed_pct</th>
<th data-quarto-table-cell-role="th">ho_pct</th>
<th data-quarto-table-cell-role="th">agecat1</th>
<th data-quarto-table-cell-role="th">agecat2</th>
<th data-quarto-table-cell-role="th">agecat3</th>
<th data-quarto-table-cell-role="th">agecat4</th>
<th data-quarto-table-cell-role="th">agecat5</th>
<th data-quarto-table-cell-role="th">agecat6</th>
<th data-quarto-table-cell-role="th">agecat7</th>
<th data-quarto-table-cell-role="th">influenza</th>
<th data-quarto-table-cell-role="th">total_population</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100196</td>
<td>80.5</td>
<td>951</td>
<td>0.301564</td>
<td>0.016648</td>
<td>228</td>
<td>1504</td>
<td>925</td>
<td>998</td>
<td>608</td>
<td>3583</td>
<td>1092</td>
<td>62</td>
<td>8938</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100247</td>
<td>91.1</td>
<td>1534</td>
<td>0.293748</td>
<td>0.020664</td>
<td>215</td>
<td>1136</td>
<td>770</td>
<td>775</td>
<td>530</td>
<td>2993</td>
<td>1152</td>
<td>61</td>
<td>7571</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Note that, in these cases, using query results in code that is much more streamlined and easier to read. However, <code>query</code> is not perfect and, particularly for more sophisticated queries, it does not afford the same degree of flexibility. For example, the last <code>query</code> we had using loc would not be possible using <code>query</code>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you are interested, more detail about <code>query</code> is available in the <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#the-query-method">pandas documentation</a>.</p>
</div>
</div>
</section>
<section id="combining-queries" class="level3">
<h3 class="anchored" data-anchor-id="combining-queries">Combining queries</h3>
<p>Now, all of these queries can be combined with each other for further flexibility. For example, imagine you want areas with more than 60 cases of influenza from areas with less than 10,000 inhabitants:</p>
<div id="4de94af6" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="annotated-cell-29"><pre class="sourceCode python code-annotation-code code-with-copy code-annotated"><code class="sourceCode python"><span id="annotated-cell-29-1"><a href="#annotated-cell-29-1" aria-hidden="true" tabindex="-1"></a>flu_loc <span class="op">=</span> chicago_1918.loc[</span>
<span id="annotated-cell-29-2"><a href="#annotated-cell-29-2" aria-hidden="true" tabindex="-1"></a>    (chicago_1918[<span class="st">"influenza"</span>] <span class="op">&gt;</span> <span class="dv">60</span>)</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-29" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-29-3" class="code-annotation-target"><a href="#annotated-cell-29-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">&amp;</span> (chicago_1918[<span class="st">"total_population"</span>] <span class="op">&lt;</span> <span class="dv">10000</span>)</span>
<span id="annotated-cell-29-4"><a href="#annotated-cell-29-4" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="annotated-cell-29-5"><a href="#annotated-cell-29-5" aria-hidden="true" tabindex="-1"></a>flu_loc</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-29" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-29" data-code-lines="3" data-code-annotation="1">The <code>&amp;</code> operator combines both conditions together.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display" data-execution_count="30">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">gross_acres</th>
<th data-quarto-table-cell-role="th">illit</th>
<th data-quarto-table-cell-role="th">unemployed_pct</th>
<th data-quarto-table-cell-role="th">ho_pct</th>
<th data-quarto-table-cell-role="th">agecat1</th>
<th data-quarto-table-cell-role="th">agecat2</th>
<th data-quarto-table-cell-role="th">agecat3</th>
<th data-quarto-table-cell-role="th">agecat4</th>
<th data-quarto-table-cell-role="th">agecat5</th>
<th data-quarto-table-cell-role="th">agecat6</th>
<th data-quarto-table-cell-role="th">agecat7</th>
<th data-quarto-table-cell-role="th">influenza</th>
<th data-quarto-table-cell-role="th">total_population</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100196</td>
<td>80.5</td>
<td>951</td>
<td>0.301564</td>
<td>0.016648</td>
<td>228</td>
<td>1504</td>
<td>925</td>
<td>998</td>
<td>608</td>
<td>3583</td>
<td>1092</td>
<td>62</td>
<td>8938</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100247</td>
<td>91.1</td>
<td>1534</td>
<td>0.293748</td>
<td>0.020664</td>
<td>215</td>
<td>1136</td>
<td>770</td>
<td>775</td>
<td>530</td>
<td>2993</td>
<td>1152</td>
<td>61</td>
<td>7571</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
How do the <code>loc</code> queries work?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Let’s unpack how these queries work. Each part of the query above creates a single <code>Series</code> with boolean (<code>True</code> or <code>False</code>) values, encoding whether the row fulfils the condition or not.</p>
<div id="83158c1c" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>chicago_1918[<span class="st">"influenza"</span>] <span class="op">&gt;</span> <span class="dv">60</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<pre><code>geography_code
G17003100001    False
G17003100002    False
G17003100003    False
G17003100004    False
G17003100005    False
                ...  
G17003100492    False
G17003100493    False
G17003100494     True
G17003100495    False
G17003100496    False
Name: influenza, Length: 496, dtype: bool</code></pre>
</div>
</div>
<div id="0570151f" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>chicago_1918[<span class="st">"total_population"</span>] <span class="op">&lt;</span> <span class="dv">10000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>geography_code
G17003100001     True
G17003100002     True
G17003100003     True
G17003100004     True
G17003100005     True
                ...  
G17003100492     True
G17003100493    False
G17003100494    False
G17003100495     True
G17003100496     True
Name: total_population, Length: 496, dtype: bool</code></pre>
</div>
</div>
<p>You then combine two of these Series with <code>&amp;</code>, asking for a new <code>Series</code> where values in both the first and the second <code>Series</code> are <code>True</code>.</p>
<div id="11f42d82" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>(chicago_1918[<span class="st">"influenza"</span>] <span class="op">&gt;</span> <span class="dv">60</span>) <span class="op">&amp;</span> (chicago_1918[<span class="st">"total_population"</span>] <span class="op">&lt;</span> <span class="dv">10000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>geography_code
G17003100001    False
G17003100002    False
G17003100003    False
G17003100004    False
G17003100005    False
                ...  
G17003100492    False
G17003100493    False
G17003100494    False
G17003100495    False
G17003100496    False
Length: 496, dtype: bool</code></pre>
</div>
</div>
<p>Such a <code>Series</code> is then essentially used as a mask, and <code>loc</code> returns only those columns that contain <code>True</code> in that mask.</p>
</div>
</div>
</div>
</section>
<section id="sorting" class="level3">
<h3 class="anchored" data-anchor-id="sorting">Sorting</h3>
<p>Among the many operations <code>DataFrame</code> objects support, one of the most useful ones is to sort a table based on a given column. For example, imagine you want to sort the table by the influenza cases:</p>
<div id="3a646855" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="annotated-cell-30"><pre class="sourceCode python code-annotation-code code-with-copy code-annotated"><code class="sourceCode python"><a class="code-annotation-anchor" data-target-cell="annotated-cell-30" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-30-1" class="code-annotation-target"><a href="#annotated-cell-30-1" aria-hidden="true" tabindex="-1"></a>chicago_sorted <span class="op">=</span> chicago_1918.sort_values(<span class="st">'influenza'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="annotated-cell-30-2"><a href="#annotated-cell-30-2" aria-hidden="true" tabindex="-1"></a>chicago_sorted</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-30" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-30" data-code-lines="1" data-code-annotation="1">By default, <code>pandas</code> is sorting from the smallest to the largest values (ascending). By specifying <code>ascending=False</code>, you switch the order.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display" data-execution_count="34">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">gross_acres</th>
<th data-quarto-table-cell-role="th">illit</th>
<th data-quarto-table-cell-role="th">unemployed_pct</th>
<th data-quarto-table-cell-role="th">ho_pct</th>
<th data-quarto-table-cell-role="th">agecat1</th>
<th data-quarto-table-cell-role="th">agecat2</th>
<th data-quarto-table-cell-role="th">agecat3</th>
<th data-quarto-table-cell-role="th">agecat4</th>
<th data-quarto-table-cell-role="th">agecat5</th>
<th data-quarto-table-cell-role="th">agecat6</th>
<th data-quarto-table-cell-role="th">agecat7</th>
<th data-quarto-table-cell-role="th">influenza</th>
<th data-quarto-table-cell-role="th">total_population</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100494</td>
<td>1392.8</td>
<td>1504</td>
<td>0.336032</td>
<td>0.072317</td>
<td>309</td>
<td>1779</td>
<td>1252</td>
<td>1598</td>
<td>1086</td>
<td>6235</td>
<td>2673</td>
<td>85</td>
<td>14932</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100285</td>
<td>120.0</td>
<td>621</td>
<td>0.318677</td>
<td>0.047779</td>
<td>419</td>
<td>1870</td>
<td>1190</td>
<td>1263</td>
<td>818</td>
<td>4370</td>
<td>1335</td>
<td>82</td>
<td>11265</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100246</td>
<td>113.0</td>
<td>2596</td>
<td>0.330517</td>
<td>0.027537</td>
<td>407</td>
<td>2090</td>
<td>1497</td>
<td>1681</td>
<td>1063</td>
<td>4564</td>
<td>1934</td>
<td>77</td>
<td>13236</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100352</td>
<td>600.0</td>
<td>638</td>
<td>0.267962</td>
<td>0.055023</td>
<td>404</td>
<td>1962</td>
<td>1251</td>
<td>1151</td>
<td>603</td>
<td>5261</td>
<td>1251</td>
<td>70</td>
<td>11883</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100196</td>
<td>80.5</td>
<td>951</td>
<td>0.301564</td>
<td>0.016648</td>
<td>228</td>
<td>1504</td>
<td>925</td>
<td>998</td>
<td>608</td>
<td>3583</td>
<td>1092</td>
<td>62</td>
<td>8938</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100297</td>
<td>38.1</td>
<td>4</td>
<td>0.461538</td>
<td>0.000000</td>
<td>0</td>
<td>3</td>
<td>1</td>
<td>4</td>
<td>0</td>
<td>8</td>
<td>10</td>
<td>0</td>
<td>26</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100209</td>
<td>124.1</td>
<td>13</td>
<td>0.438105</td>
<td>0.062971</td>
<td>30</td>
<td>120</td>
<td>92</td>
<td>196</td>
<td>166</td>
<td>763</td>
<td>491</td>
<td>0</td>
<td>1858</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100293</td>
<td>40.0</td>
<td>17</td>
<td>0.345238</td>
<td>0.053571</td>
<td>4</td>
<td>23</td>
<td>18</td>
<td>26</td>
<td>16</td>
<td>59</td>
<td>22</td>
<td>0</td>
<td>168</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100202</td>
<td>13.1</td>
<td>6</td>
<td>0.323326</td>
<td>0.027714</td>
<td>5</td>
<td>40</td>
<td>24</td>
<td>37</td>
<td>28</td>
<td>218</td>
<td>78</td>
<td>0</td>
<td>430</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100396</td>
<td>26.2</td>
<td>8</td>
<td>0.344066</td>
<td>0.015639</td>
<td>14</td>
<td>54</td>
<td>31</td>
<td>53</td>
<td>48</td>
<td>609</td>
<td>275</td>
<td>0</td>
<td>1084</td>
</tr>
</tbody>
</table>

<p>496 rows × 13 columns</p>
</div>
</div>
</div>
<p>Given the areas of each census tract differ, it may be better to sort by the mortality rate rather than raw counts.</p>
<div id="cd61bde2" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="annotated-cell-31"><pre class="sourceCode python code-annotation-code code-with-copy code-annotated"><code class="sourceCode python"><a class="code-annotation-anchor" data-target-cell="annotated-cell-31" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-31-1" class="code-annotation-target"><a href="#annotated-cell-31-1" aria-hidden="true" tabindex="-1"></a>chicago_1918[<span class="st">"flu_rate"</span>] <span class="op">=</span> (</span>
<span id="annotated-cell-31-2"><a href="#annotated-cell-31-2" aria-hidden="true" tabindex="-1"></a>    chicago_1918[<span class="st">"influenza"</span>] <span class="op">/</span> chicago_1918[<span class="st">"total_population"</span>]</span>
<span id="annotated-cell-31-3"><a href="#annotated-cell-31-3" aria-hidden="true" tabindex="-1"></a>)</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-31" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-31-4" class="code-annotation-target"><a href="#annotated-cell-31-4" aria-hidden="true" tabindex="-1"></a>chicago_sorted_rel <span class="op">=</span> chicago_1918.sort_values(<span class="st">'flu_rate'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="annotated-cell-31-5"><a href="#annotated-cell-31-5" aria-hidden="true" tabindex="-1"></a>chicago_sorted_rel</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-31" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-31" data-code-lines="1,2,3" data-code-annotation="1">Compute the relative rate and assign it as a new column.</span>
</dd>
<dt data-target-cell="annotated-cell-31" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-31" data-code-lines="4" data-code-annotation="2">Sort values by this new column.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display" data-execution_count="35">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">gross_acres</th>
<th data-quarto-table-cell-role="th">illit</th>
<th data-quarto-table-cell-role="th">unemployed_pct</th>
<th data-quarto-table-cell-role="th">ho_pct</th>
<th data-quarto-table-cell-role="th">agecat1</th>
<th data-quarto-table-cell-role="th">agecat2</th>
<th data-quarto-table-cell-role="th">agecat3</th>
<th data-quarto-table-cell-role="th">agecat4</th>
<th data-quarto-table-cell-role="th">agecat5</th>
<th data-quarto-table-cell-role="th">agecat6</th>
<th data-quarto-table-cell-role="th">agecat7</th>
<th data-quarto-table-cell-role="th">influenza</th>
<th data-quarto-table-cell-role="th">total_population</th>
<th data-quarto-table-cell-role="th">flu_rate</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100086</td>
<td>140.7</td>
<td>153</td>
<td>0.331750</td>
<td>0.034838</td>
<td>39</td>
<td>179</td>
<td>144</td>
<td>197</td>
<td>111</td>
<td>399</td>
<td>189</td>
<td>26</td>
<td>1258</td>
<td>0.020668</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100022</td>
<td>233.2</td>
<td>20</td>
<td>0.369973</td>
<td>0.107239</td>
<td>6</td>
<td>28</td>
<td>35</td>
<td>48</td>
<td>28</td>
<td>151</td>
<td>77</td>
<td>7</td>
<td>373</td>
<td>0.018767</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100261</td>
<td>164.9</td>
<td>287</td>
<td>0.307767</td>
<td>0.031068</td>
<td>25</td>
<td>126</td>
<td>92</td>
<td>113</td>
<td>87</td>
<td>414</td>
<td>172</td>
<td>18</td>
<td>1029</td>
<td>0.017493</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100282</td>
<td>293.5</td>
<td>97</td>
<td>0.142330</td>
<td>0.044248</td>
<td>15</td>
<td>70</td>
<td>67</td>
<td>74</td>
<td>198</td>
<td>758</td>
<td>173</td>
<td>20</td>
<td>1355</td>
<td>0.014760</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100249</td>
<td>137.0</td>
<td>317</td>
<td>0.337257</td>
<td>0.017202</td>
<td>63</td>
<td>314</td>
<td>277</td>
<td>345</td>
<td>171</td>
<td>718</td>
<td>320</td>
<td>31</td>
<td>2208</td>
<td>0.014040</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100202</td>
<td>13.1</td>
<td>6</td>
<td>0.323326</td>
<td>0.027714</td>
<td>5</td>
<td>40</td>
<td>24</td>
<td>37</td>
<td>28</td>
<td>218</td>
<td>78</td>
<td>0</td>
<td>430</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100093</td>
<td>71.2</td>
<td>34</td>
<td>0.268041</td>
<td>0.025773</td>
<td>4</td>
<td>33</td>
<td>20</td>
<td>25</td>
<td>10</td>
<td>66</td>
<td>36</td>
<td>0</td>
<td>194</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100293</td>
<td>40.0</td>
<td>17</td>
<td>0.345238</td>
<td>0.053571</td>
<td>4</td>
<td>23</td>
<td>18</td>
<td>26</td>
<td>16</td>
<td>59</td>
<td>22</td>
<td>0</td>
<td>168</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100297</td>
<td>38.1</td>
<td>4</td>
<td>0.461538</td>
<td>0.000000</td>
<td>0</td>
<td>3</td>
<td>1</td>
<td>4</td>
<td>0</td>
<td>8</td>
<td>10</td>
<td>0</td>
<td>26</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100488</td>
<td>1600.1</td>
<td>3</td>
<td>0.404762</td>
<td>0.000000</td>
<td>2</td>
<td>5</td>
<td>4</td>
<td>7</td>
<td>1</td>
<td>17</td>
<td>6</td>
<td>0</td>
<td>42</td>
<td>0.000000</td>
</tr>
</tbody>
</table>

<p>496 rows × 14 columns</p>
</div>
</div>
</div>
<p>If you inspect the help of <code>chicago_1918.sort_values</code>, you will find that you can pass more than one column to sort the table by. This allows you to do so-called hierarchical sorting: sort first based on one column, if equal, then based on another column, etc.</p>
</section>
</section>
<section id="visual-exploration" class="level2">
<h2 class="anchored" data-anchor-id="visual-exploration">Visual Exploration</h2>
<p>The next step to continue exploring a dataset is to get a feel for what it looks like, visually. You have already learnt how to unconver and inspect specific parts of the data, to check for particular cases you might be interested in. Now, you will see how to plot the data to get a sense of the overall distribution of values. For that, you can use the plotting capabilities of <code>pandas</code>.</p>
<section id="histograms" class="level3">
<h3 class="anchored" data-anchor-id="histograms">Histograms</h3>
<p>One of the most common graphical devices to display the distribution of values in a variable is a histogram. Values are assigned into groups of equal intervals, and the groups are plotted as bars rising as high as the number of values into the group.</p>
<p>A histogram is easily created with the following command. In this case, let us have a look at the shape of the overall influenza rates:</p>
<div id="3d45416a" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>_ <span class="op">=</span> chicago_1918[<span class="st">"influenza"</span>].plot.hist()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="hands_on_files/figure-html/cell-37-output-1.png" width="593" height="411" class="figure-img"></p>
<figcaption>Histogram of influenza cases</figcaption>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Assigning to <code>_</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><code>pandas</code> returns an object with the drawing from its plotting methods. Since you are in Jupyter environment, and you don’t need to work further with that object; you can assign it to <code>_</code>, a convention for an unused variable.</p>
</div>
</div>
</div>
<p>However, the default <code>pandas</code> plots can be a bit dull. A better option is to use another package, called <a href="https://seaborn.pydata.org"><code>seaborn</code></a>.</p>
<div id="50cd71f7" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Why <code>sns</code>?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><code>seaborn</code> is, by convention, imported as <code>sns</code>. That came as a joke after <a href="https://en.wikipedia.org/wiki/Sam_Seaborn">Samuel Normal Seaborn</a>, a fictional character The West Wing show.</p>
</div>
</div>
</div>
<p>The same plot using <code>seaborn</code> has a more pleasant default style and more customisability.</p>
<div id="abd3f97a" class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>sns.displot(chicago_1918[<span class="st">"influenza"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="hands_on_files/figure-html/cell-39-output-1.png" width="469" height="468" class="figure-img"></p>
<figcaption>Histogram of influenza cases using <code>seaborn</code></figcaption>
</figure>
</div>
</div>
</div>
<p>Note you are using <code>sns</code> instead of <code>pd</code>, as the function belongs to <code>seaborn</code> instead of <code>pandas</code>.</p>
<p>You can quickly see most of the areas have seen somewhere between 0 and 60 cases, approx. However, there are a few areas that have more, up to more than 80 cases.</p>
</section>
<section id="kernel-density-plots" class="level3">
<h3 class="anchored" data-anchor-id="kernel-density-plots">Kernel Density Plots</h3>
<p>Histograms are useful, but they are artificial in the sense that a continuous variable is made discrete by turning the values into discrete groups. An alternative is kernel density estimation (KDE), which produces an empirical density function:</p>
<div id="c5a14256" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="annotated-cell-35"><pre class="sourceCode python code-annotation-code code-with-copy code-annotated"><code class="sourceCode python"><a class="code-annotation-anchor" data-target-cell="annotated-cell-35" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-35-1" class="code-annotation-target"><a href="#annotated-cell-35-1" aria-hidden="true" tabindex="-1"></a>sns.displot(chicago_1918[<span class="st">"influenza"</span>], kind<span class="op">=</span><span class="st">"kde"</span>, fill<span class="op">=</span><span class="va">True</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-35" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-35" data-code-lines="1" data-code-annotation="1"><code>kind="kde"</code> specifies which type of a distribution plot should <code>seaborn</code> use and <code>fill=True</code> tells it to colour the area under the KDE curve.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="hands_on_files/figure-html/cell-40-output-1.png" width="470" height="468" class="figure-img"></p>
<figcaption>Kernel density plot of influenza cases</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="line-and-bar-plots" class="level3">
<h3 class="anchored" data-anchor-id="line-and-bar-plots">Line and bar plots</h3>
<p>Another very common way of visually displaying a variable is with a line or a bar chart. For example, if you want to generate a line plot of the (sorted) total cases by area:</p>
<div id="8e0fcbd3" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>_ <span class="op">=</span> chicago_1918[<span class="st">"influenza"</span>].sort_values(ascending<span class="op">=</span><span class="va">False</span>).plot()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="hands_on_files/figure-html/cell-41-output-1.png" width="568" height="429" class="figure-img"></p>
<figcaption>Total cases by area (sorted)</figcaption>
</figure>
</div>
</div>
</div>
<p>For a bar plot all you need to do is to change from <code>plot</code> to <code>plot.bar</code>. Since there are many census tracts, let us plot only the ten largest ones (which you can retrieve with <code>head</code>):</p>
<div id="62c85fb9" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>_ <span class="op">=</span> chicago_1918[<span class="st">"influenza"</span>].sort_values(ascending<span class="op">=</span><span class="va">False</span>).head(<span class="dv">10</span>).plot.bar()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="hands_on_files/figure-html/cell-42-output-1.png" width="566" height="520" class="figure-img"></p>
<figcaption>Total cases by area as a bar plot</figcaption>
</figure>
</div>
</div>
</div>
<p>You can turn the plot around by displaying the bars horizontally (see how it’s just changing <code>bar</code> for <code>barh</code>). Let’s display now the top 50 areas and, to make it more readable, let us expand the plot’s height:</p>
<div id="86c9422f" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>_ <span class="op">=</span> (</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>    chicago_1918[<span class="st">"total_population"</span>]</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>    .sort_values()</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    .head(<span class="dv">50</span>)</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>    .plot.barh(figsize<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">20</span>))</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="hands_on_files/figure-html/cell-43-output-1.png" width="597" height="1520" class="figure-img"></p>
<figcaption>Total cases by area as a horizontal bar plot</figcaption>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
One line or multiple lines?
</div>
</div>
<div class="callout-body-container callout-body">
<p>You may have noticed that in some cases, the code is on a single line, but longer code is split into multiple lines. Python requires you to follow the <a href="https://peps.python.org/pep-0008/">indentation rules</a>, but apart from that, there are not a lot of other limits.</p>
</div>
</div>
</section>
</section>
<section id="tidy-data" class="level2">
<h2 class="anchored" data-anchor-id="tidy-data">Tidy data</h2>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>This section is a bit more advanced and hence considered optional. Feel free to skip it, move to the next, and return later when you feel more confident.</p>
</div>
</div>
<p>Once you can read your data in, explore specific cases, and have a first visual approach to the entire set, the next step can be preparing it for more sophisticated analysis. Maybe you are thinking of modeling it through regression, or on creating subgroups in the dataset with particular characteristics, or maybe you simply need to present summary measures that relate to a slightly different arrangement of the data than you have been presented with.</p>
<p>For all these cases, you first need what statistician, and general R wizard, Hadley Wickham calls <em>“tidy data”</em>. The general idea to “tidy” your data is to convert them from whatever structure they were handed in to you into one that allows convenient and standardized manipulation, and that supports directly inputting the data into what he calls “<em>tidy</em>” analysis tools. But, at a more practical level, what is exactly <em>“tidy data”</em>? In Wickham’s own words:</p>
<blockquote class="blockquote">
<p><em>Tidy data is a standard way of mapping the meaning of a dataset to its structure. A dataset is messy or tidy depending on how rows, columns and tables are matched up with observations, variables and types.</em></p>
</blockquote>
<p>He then goes on to list the three fundamental characteristics of <em>“tidy data”</em>:</p>
<ol type="1">
<li>Each variable forms a column.</li>
<li>Each observation forms a row.</li>
<li>Each type of observational unit forms a table.</li>
</ol>
<p>If you are further interested in the concept of <em>“tidy data”</em>, I recommend you check out the <a href="http://www.jstatsoft.org/v59/i10/">original paper</a> (open access) and the <a href="https://github.com/hadley/tidy-data">public repository</a> associated with it.</p>
<p>Let us bring in the concept of “<em>tidy data</em>” to our own Chicago dataset. First, remember its structure:</p>
<div id="f3257859" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>chicago_1918.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="43">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">gross_acres</th>
<th data-quarto-table-cell-role="th">illit</th>
<th data-quarto-table-cell-role="th">unemployed_pct</th>
<th data-quarto-table-cell-role="th">ho_pct</th>
<th data-quarto-table-cell-role="th">agecat1</th>
<th data-quarto-table-cell-role="th">agecat2</th>
<th data-quarto-table-cell-role="th">agecat3</th>
<th data-quarto-table-cell-role="th">agecat4</th>
<th data-quarto-table-cell-role="th">agecat5</th>
<th data-quarto-table-cell-role="th">agecat6</th>
<th data-quarto-table-cell-role="th">agecat7</th>
<th data-quarto-table-cell-role="th">influenza</th>
<th data-quarto-table-cell-role="th">total_population</th>
<th data-quarto-table-cell-role="th">flu_rate</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100001</td>
<td>1388.2</td>
<td>116</td>
<td>0.376950</td>
<td>0.124823</td>
<td>46</td>
<td>274</td>
<td>257</td>
<td>311</td>
<td>222</td>
<td>1122</td>
<td>587</td>
<td>9</td>
<td>2819</td>
<td>0.003193</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100002</td>
<td>217.7</td>
<td>14</td>
<td>0.399571</td>
<td>0.071647</td>
<td>35</td>
<td>320</td>
<td>441</td>
<td>624</td>
<td>276</td>
<td>1061</td>
<td>508</td>
<td>6</td>
<td>3265</td>
<td>0.001838</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100003</td>
<td>401.3</td>
<td>69</td>
<td>0.349558</td>
<td>0.092920</td>
<td>50</td>
<td>265</td>
<td>179</td>
<td>187</td>
<td>163</td>
<td>1020</td>
<td>392</td>
<td>8</td>
<td>2256</td>
<td>0.003546</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100004</td>
<td>86.9</td>
<td>11</td>
<td>0.422535</td>
<td>0.030072</td>
<td>43</td>
<td>241</td>
<td>129</td>
<td>141</td>
<td>123</td>
<td>1407</td>
<td>539</td>
<td>2</td>
<td>2623</td>
<td>0.000762</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100005</td>
<td>337.1</td>
<td>20</td>
<td>0.431822</td>
<td>0.084703</td>
<td>65</td>
<td>464</td>
<td>369</td>
<td>464</td>
<td>328</td>
<td>2625</td>
<td>1213</td>
<td>7</td>
<td>5528</td>
<td>0.001266</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Thinking through <em>tidy</em> lenses, this is not a tidy dataset. It is not so for each of the three conditions:</p>
<ul>
<li>Starting by the last one (<em>each type of observational unit forms a table</em>), this dataset actually contains not one but many observational units: the different areas of Chicago, captured by <code>geography_code</code>; <em>and</em> different observatoins for each area. To <em>tidy</em> up this aspect, you can create separate tables. You will probably want population groups divided by age as one tidy table and flu rates as another. Start by extracting relevant columns.</li>
</ul>
<div id="fcc4544b" class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="annotated-cell-40"><pre class="sourceCode python code-annotation-code code-with-copy code-annotated"><code class="sourceCode python"><a class="code-annotation-anchor" data-target-cell="annotated-cell-40" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-40-1" class="code-annotation-target"><a href="#annotated-cell-40-1" aria-hidden="true" tabindex="-1"></a>influenza_rates <span class="op">=</span> chicago_1918[[<span class="st">"influenza"</span>]]</span>
<span id="annotated-cell-40-2"><a href="#annotated-cell-40-2" aria-hidden="true" tabindex="-1"></a>influenza_rates.head()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-40" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-40" data-code-lines="1" data-code-annotation="1">You are not selecting a single columns with <code>chicago_1918["influenza"]</code> but a subset of columns. Just that the subset contains only one column, so you pass a list with a single column name as <code>chicago_1918[["influenza"]]</code>. Notice the double brackets.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display" data-execution_count="44">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">influenza</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100001</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100002</td>
<td>6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100003</td>
<td>8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100004</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100005</td>
<td>7</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="30af99f0" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>population <span class="op">=</span> chicago_1918.loc[:, <span class="st">"agecat1"</span>:<span class="st">"agecat7"</span>]</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>population.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="45">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">agecat1</th>
<th data-quarto-table-cell-role="th">agecat2</th>
<th data-quarto-table-cell-role="th">agecat3</th>
<th data-quarto-table-cell-role="th">agecat4</th>
<th data-quarto-table-cell-role="th">agecat5</th>
<th data-quarto-table-cell-role="th">agecat6</th>
<th data-quarto-table-cell-role="th">agecat7</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100001</td>
<td>46</td>
<td>274</td>
<td>257</td>
<td>311</td>
<td>222</td>
<td>1122</td>
<td>587</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100002</td>
<td>35</td>
<td>320</td>
<td>441</td>
<td>624</td>
<td>276</td>
<td>1061</td>
<td>508</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100003</td>
<td>50</td>
<td>265</td>
<td>179</td>
<td>187</td>
<td>163</td>
<td>1020</td>
<td>392</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G17003100004</td>
<td>43</td>
<td>241</td>
<td>129</td>
<td>141</td>
<td>123</td>
<td>1407</td>
<td>539</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G17003100005</td>
<td>65</td>
<td>464</td>
<td>369</td>
<td>464</td>
<td>328</td>
<td>2625</td>
<td>1213</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>At this point, the table <code>influenza_rates</code> is tidy: every row is an observation, every table is a variable, and there is only one observational unit in the table.</p>
<p>The other table (<code>population</code>), however, is not entirely tidied up yet: there is only one observational unit in the table, true; but every row is not an observation, and there are variable values as the names of columns (in other words, every column is not a variable). To obtain a fully tidy version of the table, you need to re-arrange it in a way that every row is an age category in an area, and there are three variables: <code>geography_code</code>, age category, and population count (or frequency).</p>
<p>Because this is actually a fairly common pattern, there is a direct way to solve it in <code>pandas</code>:</p>
<div id="ab4774b4" class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>tidy_population <span class="op">=</span> population.stack()</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>tidy_population.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="46">
<pre><code>geography_code         
G17003100001    agecat1     46
                agecat2    274
                agecat3    257
                agecat4    311
                agecat5    222
dtype: int64</code></pre>
</div>
</div>
<p>The method <code>stack</code>, well, “stacks” the different columns into rows. This fixes our “tidiness” problems but the type of object that is returning is not a <code>DataFrame</code>:</p>
<div id="1b4c701e" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(tidy_population)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="47">
<pre><code>pandas.core.series.Series</code></pre>
</div>
</div>
<p>It is a <code>Series</code>, which really is like a <code>DataFrame</code>, but with only one column. The additional information (<code>geography_code</code> and age category) are stored in what is called an multi-index. You will skip these for now, so you would really just want to get a <code>DataFrame</code> as you know it out of the <code>Series</code>. This is also one line of code away:</p>
<div id="b0e07e53" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>tidy_population_df <span class="op">=</span> tidy_population.reset_index()</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>tidy_population_df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="48">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th">level_1</th>
<th data-quarto-table-cell-role="th">0</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>G17003100001</td>
<td>agecat1</td>
<td>46</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>G17003100001</td>
<td>agecat2</td>
<td>274</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>G17003100001</td>
<td>agecat3</td>
<td>257</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>G17003100001</td>
<td>agecat4</td>
<td>311</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>G17003100001</td>
<td>agecat5</td>
<td>222</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>To which you can apply to renaming to make it look better:</p>
<div id="0840cc3f" class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>tidy_population_df <span class="op">=</span> tidy_population_df.rename(</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>    columns<span class="op">=</span>{<span class="st">"level_1"</span>: <span class="st">"age_category"</span>, <span class="dv">0</span>: <span class="st">"count"</span>}</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>tidy_population_df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="49">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">geography_code</th>
<th data-quarto-table-cell-role="th">age_category</th>
<th data-quarto-table-cell-role="th">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>G17003100001</td>
<td>agecat1</td>
<td>46</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>G17003100001</td>
<td>agecat2</td>
<td>274</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>G17003100001</td>
<td>agecat3</td>
<td>257</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>G17003100001</td>
<td>agecat4</td>
<td>311</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>G17003100001</td>
<td>agecat5</td>
<td>222</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Now our table is fully tidied up!</p>
</section>
<section id="grouping-transforming-aggregating" class="level2">
<h2 class="anchored" data-anchor-id="grouping-transforming-aggregating">Grouping, transforming, aggregating</h2>
<p>One of the advantage of tidy datasets is they allow to perform advanced transformations in a more direct way. One of the most common ones is what is called “group-by” operations. Originated in the world of databases, these operations allow you to group observations in a table by one of its labels, index, or category, and apply operations on the data group by group.</p>
<p>For example, given our tidy table with age categories, you might want to compute the total sum of the population by each category. This task can be split into two different ones:</p>
<ul>
<li>Group the table in each of the different subgroups.</li>
<li>Compute the sum of <code>count</code> for each of them.</li>
</ul>
<p>To do this in <code>pandas</code>, meet one of its workhorses, and also one of the reasons why the library has become so popular: the <code>groupby</code> operator.</p>
<div id="a46812dc" class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>pop_grouped <span class="op">=</span> tidy_population_df.groupby(<span class="st">"age_category"</span>)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>pop_grouped</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="50">
<pre><code>&lt;pandas.core.groupby.generic.DataFrameGroupBy object at 0x7fb6e75e76e0&gt;</code></pre>
</div>
</div>
<p>The object <code>pop_grouped</code> still hasn’t computed anything. It is only a convenient way of specifying the grouping. But this allows us then to perform a multitude of operations on it. For our example, the sum is calculated as follows:</p>
<div id="b12c7c6c" class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="annotated-cell-47"><pre class="sourceCode python code-annotation-code code-with-copy code-annotated"><code class="sourceCode python"><a class="code-annotation-anchor" data-target-cell="annotated-cell-47" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-47-1" class="code-annotation-target"><a href="#annotated-cell-47-1" aria-hidden="true" tabindex="-1"></a>pop_grouped.<span class="bu">sum</span>(numeric_only<span class="op">=</span><span class="va">True</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-47" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-47" data-code-lines="1" data-code-annotation="1">You want a sum of numeric values, not strings. Try it with <code>numeric_only=False</code> to see the difference.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-display" data-execution_count="51">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">count</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">age_category</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">agecat1</td>
<td>50776</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">agecat2</td>
<td>275363</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">agecat3</td>
<td>201654</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">agecat4</td>
<td>259954</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">agecat5</td>
<td>206358</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">agecat6</td>
<td>1171345</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">agecat7</td>
<td>522130</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Similarly, you can also obtain a summary of each group:</p>
<div id="37934958" class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>pop_grouped.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="52">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th colspan="8" data-quarto-table-cell-role="th" data-halign="left">count</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">std</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">25%</th>
<th data-quarto-table-cell-role="th">50%</th>
<th data-quarto-table-cell-role="th">75%</th>
<th data-quarto-table-cell-role="th">max</th>
</tr>
<tr class="header">
<th data-quarto-table-cell-role="th">age_category</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">agecat1</td>
<td>496.0</td>
<td>102.370968</td>
<td>78.677423</td>
<td>0.0</td>
<td>46.75</td>
<td>82.0</td>
<td>136.00</td>
<td>427.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">agecat2</td>
<td>496.0</td>
<td>555.167339</td>
<td>423.526444</td>
<td>3.0</td>
<td>256.50</td>
<td>442.5</td>
<td>717.50</td>
<td>2512.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">agecat3</td>
<td>496.0</td>
<td>406.560484</td>
<td>301.564896</td>
<td>1.0</td>
<td>193.50</td>
<td>331.5</td>
<td>532.50</td>
<td>1917.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">agecat4</td>
<td>496.0</td>
<td>524.100806</td>
<td>369.875444</td>
<td>4.0</td>
<td>253.75</td>
<td>453.5</td>
<td>709.50</td>
<td>2665.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">agecat5</td>
<td>496.0</td>
<td>416.044355</td>
<td>281.825682</td>
<td>0.0</td>
<td>220.50</td>
<td>377.0</td>
<td>551.75</td>
<td>2454.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">agecat6</td>
<td>496.0</td>
<td>2361.582661</td>
<td>1545.469426</td>
<td>8.0</td>
<td>1169.75</td>
<td>2102.0</td>
<td>3191.75</td>
<td>9792.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">agecat7</td>
<td>496.0</td>
<td>1052.681452</td>
<td>722.955717</td>
<td>6.0</td>
<td>519.75</td>
<td>918.5</td>
<td>1379.25</td>
<td>4163.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>You will not get into it today as it goes beyond the basics this session wants to cover, but keep in mind that <code>groupby</code> allows you to not only call generic functions (like <code>sum</code> or <code>describe</code>), but also your own functions. This opens the door for virtually any kind of transformation and aggregation possible.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Additional reading
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>A good introduction to data manipulation in Python is Wes McKinney’s “<a href="https://wesmckinney.com/book/pandas-basics">Python for Data Analysis</a>” <span class="citation" data-cites="mckinney2012python">(<a href="#ref-mckinney2012python" role="doc-biblioref">McKinney 2012</a>)</span>.</li>
<li>To explore further some of the visualization capabilities in at your fingertips, the Python library <code>seaborn</code> is an excellent choice. Its online <a href="https://seaborn.pydata.org/tutorial.html">tutorial</a> is a fantastic place to start.</li>
<li>A good extension is Hadley Wickham’s “Tidy data” paper <span class="citation" data-cites="wickham2014tidy">(<a href="#ref-wickham2014tidy" role="doc-biblioref">Wickham 2014</a>)</span>, which presents a very popular way of organising tabular data for efficient manipulation.</li>
</ul>
</div>
</div>
</section>



<div id="quarto-appendix" class="default"><section id="acknowledgements" class="level2 appendix"><h2 class="anchored quarto-appendix-heading">Acknowledgements</h2><div class="quarto-appendix-contents">

<p>This section is derived from <em>A Course on Geographic Data Science</em> by <span class="citation" data-cites="darribas_gds_course">Arribas-Bel (<a href="#ref-darribas_gds_course" role="doc-biblioref">2019</a>)</span>, licensed under CC-BY-SA 4.0. The text was slightly adapted, mostly to accommodate a different dataset used.</p>



</div></section><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-darribas_gds_course" class="csl-entry" role="listitem">
Arribas-Bel, Dani. 2019. <span>“A Course on Geographic Data Science.”</span> <em>The Journal of Open Source Education</em> 2 (14). <a href="https://doi.org/10.21105/jose.00042">https://doi.org/10.21105/jose.00042</a>.
</div>
<div id="ref-grantz2016disparities" class="csl-entry" role="listitem">
Grantz, Kyra H, Madhura S Rane, Henrik Salje, Gregory E Glass, Stephen E Schachterle, and Derek AT Cummings. 2016. <span>“Disparities in Influenza Mortality and Transmission Related to Sociodemographic Factors Within Chicago in the Pandemic of 1918.”</span> <em>Proceedings of the National Academy of Sciences</em> 113 (48): 13839–44.
</div>
<div id="ref-mckinney2012python" class="csl-entry" role="listitem">
McKinney, Wes. 2012. <em>Python for Data Analysis: Data Wrangling with Pandas, NumPy, and IPython</em>. " O’Reilly Media, Inc.".
</div>
<div id="ref-wickham2014tidy" class="csl-entry" role="listitem">
Wickham, Hadley. 2014. <span>“Tidy Data.”</span> <em>Journal of Statistical Software</em> 59 (10): 1–23. <a href="https://doi.org/10.18637/jss.v059.i10">https://doi.org/10.18637/jss.v059.i10</a>.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Data munging and data wrangling are used interchangeably. Pick the one you like.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Scalar is a single value, like a number (<code>42</code>) or a string (<code>"towel"</code>).<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../data_wrangling/concepts.html" class="pagination-link" aria-label="Open tools and open mindset">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Open tools and open mindset</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../data_wrangling/exercise.html" class="pagination-link" aria-label="Learning pandas">
        <span class="nav-page-text">Learning pandas</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Course material by <a href="https://martinfleischmann.net">Martin Fleischmann</a>. Available under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>.</p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/martinfleis/sds/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




<script src="../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>